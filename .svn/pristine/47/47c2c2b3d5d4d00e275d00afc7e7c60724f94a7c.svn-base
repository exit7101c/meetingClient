"use strict";(self["webpackChunknavy"]=self["webpackChunknavy"]||[]).push([[3678],{64963:(t,e,i)=>{var a,s;i.d(e,{ez:()=>s}),function(t){t["Documents"]="DOCUMENTS",t["Data"]="DATA",t["Library"]="LIBRARY",t["Cache"]="CACHE",t["External"]="EXTERNAL",t["ExternalStorage"]="EXTERNAL_STORAGE"}(a||(a={})),function(t){t["UTF8"]="utf8",t["ASCII"]="ascii",t["UTF16"]="utf16"}(s||(s={}))},4136:(t,e,i)=>{i.r(e),i.d(e,{default:()=>W});i(33948);var a=i(66252),s=i(3577),l=i(49963);const d={class:"row-box"},o={class:"btn-tab-group"},n={key:0},r={key:1},u={key:0},m={key:1},c={class:"row-box"},h={class:"row-box"},g={class:"layout-container"};function p(t,e,i,p,y,b){const w=(0,a.up)("BackButton"),C=(0,a.up)("ion-buttons"),I=(0,a.up)("ion-title"),f=(0,a.up)("ion-toolbar"),k=(0,a.up)("ion-header"),F=(0,a.up)("GuideBanner"),_=(0,a.up)("ion-button"),N=(0,a.up)("ion-input"),B=(0,a.up)("ion-note"),W=(0,a.up)("ion-item"),M=(0,a.up)("ion-textarea"),A=(0,a.up)("ion-list"),L=(0,a.up)("AddPhotoButton"),V=(0,a.up)("ion-col"),T=(0,a.up)("ion-row"),D=(0,a.up)("ion-grid"),O=(0,a.up)("SelectCategoryItem"),S=(0,a.up)("ion-content"),v=(0,a.up)("ion-page"),U=(0,a.up)("ion-modal"),x=(0,a.up)("ion-footer"),E=(0,a.up)("AlertMessageModal");return(0,a.wg)(),(0,a.j4)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onEvent:e[0]||(e[0]=t=>b.presentAlertConfirm()),custom:!0})])),_:1}),(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" 커뮤니티 글 "+(0,s.zw)("edit"!==this.type?"작성":"수정"),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,{class:"ion-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{onEvent:e[1]||(e[1]=t=>b.goRouter("guide")),title:"커뮤니티를 더 즐기기 위한 가이드 보기 배너"}),(0,a._)("div",d,[(0,a._)("div",o,[(0,a.Wm)(_,{onClick:e[2]||(e[2]=(0,l.iM)((t=>b.openModal("main")),["stop"])),fill:"outline"},{default:(0,a.w5)((()=>[""===y.categoryBoardId?((0,a.wg)(),(0,a.iD)("span",n,"게시판 선택하기")):((0,a.wg)(),(0,a.iD)("span",r,(0,s.zw)(y.categoryBoardNm),1))])),_:1}),(0,a.Wm)(_,{onClick:e[3]||(e[3]=(0,l.iM)((t=>b.openModal("sub")),["stop"])),fill:"outline",disabled:""===y.categoryBoardId},{default:(0,a.w5)((()=>[""===y.subCategoryBoardCd?((0,a.wg)(),(0,a.iD)("span",u,"서브게시판 선택하기")):((0,a.wg)(),(0,a.iD)("span",m,(0,s.zw)(y.subCategoryBoardNm),1))])),_:1},8,["disabled"])])]),(0,a._)("div",c,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(W,{ref:"nick",counter:"true",counterFormatter:y.COUNTE_FORMAT,class:"input-field"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{type:"text",maxlength:"8",placeholder:"닉네임은 최대 8자까지 가능해요",modelValue:y.communityNick,"onUpdate:modelValue":e[4]||(e[4]=t=>y.communityNick=t),onIonChange:e[5]||(e[5]=t=>y.COM_VALIDATION(y.communityNick,"nick",this))},null,8,["modelValue"]),(0,a.Wm)(B,{slot:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)("닉네임이 올바르지 않습니다.")])),_:1})])),_:1},8,["counterFormatter"]),(0,a.Wm)(W,{ref:"title",counter:"true",counterFormatter:y.COUNTE_FORMAT,class:"input-field"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{type:"text",maxlength:"40",placeholder:"제목은 최대 40자까지 가능해요",modelValue:y.title,"onUpdate:modelValue":e[6]||(e[6]=t=>y.title=t),onIonChange:e[7]||(e[7]=t=>y.COM_VALIDATION(y.title,"title",this))},null,8,["modelValue"]),(0,a.Wm)(B,{slot:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)("제목이 올바르지 않습니다.")])),_:1})])),_:1},8,["counterFormatter"]),(0,a.Wm)(W,{ref:"content",lines:"none",counter:"true",counterFormatter:y.COUNTE_FORMAT,class:"input-field"},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{modelValue:y.content,"onUpdate:modelValue":e[8]||(e[8]=t=>y.content=t),rows:15,maxlength:"2000",onIonChange:e[9]||(e[9]=t=>y.COM_VALIDATION(y.content,"content",this)),placeholder:"매너를 지켜주세요.\n특정인이나 집단을 비하하거나 저격하는 행위,\n욕설 및 비방글은 삭제됩니다."},null,8,["modelValue"]),(0,a.Wm)(B,{slot:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)("더이상 입력할수 없습니다.")])),_:1})])),_:1},8,["counterFormatter"])])),_:1})]),(0,a._)("div",h,[(0,a.Wm)(D,null,{default:(0,a.w5)((()=>[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(V,{size:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{onClick:e[10]||(e[10]=t=>b.addPhoto("add1")),name:y.add1imgViewFileId,required:!1},null,8,["name"])])),_:1}),(0,a.Wm)(V,{size:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{onClick:e[11]||(e[11]=t=>b.addPhoto("add2")),name:y.add2imgViewFileId,required:!1,subscribe:!0},null,8,["name"])])),_:1}),(0,a.Wm)(V,{size:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(L,{onClick:e[12]||(e[12]=t=>b.addPhoto("add3")),name:y.add3imgViewFileId,required:!1,subscribe:!0},null,8,["name"])])),_:1})])),_:1}),(0,a._)("input",{type:"file",onChange:e[13]||(e[13]=(...t)=>b.onFileChange&&b.onFileChange(...t)),ref:"photo",style:{display:"none"}},null,544)])),_:1})]),(0,a.Wm)(U,{ref:"modal","is-open":y.categoryModalOpen,onIonModalDidDismiss:e[14]||(e[14]=t=>y.categoryModalOpen=!1),"initial-breakpoint":1,breakpoints:[0,.15,.5,1]},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)("카테고리를 선택해 주세요")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"ion-padding"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.categoryList,(t=>((0,a.wg)(),(0,a.j4)(O,{class:"row-box",key:t.boardId,item:t,onClick:e=>b.closeCategory(t,"main")},null,8,["item","onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"]),(0,a.Wm)(U,{ref:"modal","is-open":y.subCategoryModalOpen,onIonModalDidDismiss:e[15]||(e[15]=t=>y.subCategoryModalOpen=!1),"initial-breakpoint":1,breakpoints:[0,1],style:{"--height":"50%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(f,{class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Uk)("서브 카테고리를 선택해 주세요")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"ion-padding"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.subCategoryList,(t=>((0,a.wg)(),(0,a.j4)(O,{class:"row-box",key:t.subBoardCd,item:t,type:"sub",onClick:e=>b.closeCategory(t,"sub")},null,8,["item","onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(_,{color:"primary",shape:"round",expand:"block",size:"large",onClick:e[16]||(e[16]=t=>b.checkBth(this.type)),disabled:!b.checkBtnDisabled},{default:(0,a.w5)((()=>[(0,a.Uk)(" 글 "+(0,s.zw)("edit"===this.state?"수정하기":"작성하기"),1)])),_:1},8,["disabled"])])])),_:1}),(0,a.Wm)(E,{"is-open":y.subscribeMessage,title:"NAVY+",message:"회원님은 현재 구독 상태가 아닙니다.",subMessage:"NAVY PASS 에 가입하시면 더많은 혜택을 받으실수 있습니다.",btnName:"이동",height:220,disabledCheck:!1,onIonModalDidDismiss:e[17]||(e[17]=t=>y.subscribeMessage=!1),onHandleClickBtn:e[18]||(e[18]=t=>b.goRouter("store"))},null,8,["is-open","message","subMessage"])])),_:1})}i(57658),i(26699);var y=i(28151),b=i(52677),w=i(54939),C=i(29552),I=i(2982),f=i(96826),k=i(29895);i(64963);(0,k.fo)("Filesystem",{web:()=>i.e(3176).then(i.bind(i,33176)).then((t=>new t.FilesystemWeb))});var F=i(54594);const _={inject:["alertController","loadingController"],components:{GuideBanner:b.Z,SelectCategoryItem:w.Z,AddPhotoButton:C.Z,PageLoadingCheck:I.Z,AlertMessageModal:F.Z},data(){return{COM_VALIDATION:y.QV,COUNTE_FORMAT:y.Kj,displayErrors:!1,title:"",content:"",communityNick:"익명",itemList:"",categoryList:"",categoryBoardId:"",categoryBoardNm:"",categoryModalOpen:!1,Attachfiles:[],mainFileId:"",uploadType:"",imgFileId:null,add1imgFileId:null,add2imgFileId:null,add3imgFileId:null,add1imgViewFileId:null,add2imgViewFileId:null,add3imgViewFileId:null,type:"",isNicknameValid:!0,isSaving:!1,subCategoryList:"",subCategoryModalOpen:!1,subCategoryBoardCd:"",subCategoryBoardNm:"",subCategoryCheck:"",nickValid:!0,checkDisabled:!0,userSubscribeYn:"",subscribeMessage:!1,messageModal:!1}},ionViewWillEnter(){this.type=y._3.type,this.$nextTick((()=>{this.communityNick=localStorage.getItem("SS_USER_COMMUNITY_NICK"),this.userSubscribeYn=localStorage.getItem("SS_USER_SUBSCRIBE_YN")})),"edit"===this.type?(this.getUpdate(),this.getCategoryList()):"new"===this.type&&(this.getNickname(),this.imgFileId=null,this.add1imgFileId=null,this.add2imgFileId=null,this.add3imgFileId=null,this.add1imgViewFileId=null,this.add2imgViewFileId=null,this.add3imgViewFileId=null)},ionViewDidLeave(){},mounted(){},computed:{validate(){return this.COM_VALIDATION([{value:this.communityNick,type:"nick"},{value:this.title,type:"title"},{value:this.content,type:"content"}])},checkBtnDisabled(){return""!==this.title&&""!==this.content&&!0===this.checkDisabled}},methods:{checkBth(t){this.validate?""===this.categoryBoardId?this.warningAlert("게시판을 선택해주세요."):""!==this.title||this.validate?""===this.content?this.warningAlert("내용을 입력해주세요."):this.confirmBtn(t,this.checkDisabled=!1):this.warningAlert("제목을 입력해주세요."):this.warningAlert("잘못된 항목이 있습니다. 내용을 다시 확인해주세요.")},getResult(){let t={};return t.articleKey=y.bc.article,t.communityNick=this.communityNick,t.boardId=this.categoryBoardId?this.categoryBoardId:null,t.subBoardCd=this.subCategoryBoardCd,t.title=this.title,t.content=this.content,t.attr1=this.add1imgFileId?this.add1imgFileId:null,t.attr2=this.add2imgFileId?this.add2imgFileId:null,t.attr3=this.add3imgFileId?this.add3imgFileId:null,t},getNickname(){(0,y.Yu)({url:"/getCommunityUserNick",param:{},then:t=>{this.communityNick=t[0].communityLastnick}})},getCategoryList(){(0,y.Yu)({url:"/getCategoryList",param:{},then:t=>{this.categoryList=t}})},getSubCategoryList(){(0,y.Yu)({url:"/getSubCategoryList",param:{boardId:this.categoryBoardId},then:t=>{this.subCategoryList=t}})},getUpdate(){(0,y.Yu)({url:"/getCommunityDetail",param:{articleKey:y._3.article,type:y._3.type,viewAddYn:"N"},then:t=>{this.itemList=t.articleMap,this.communityNick=this.itemList.communityNick,this.title=this.itemList.title,this.content=this.itemList.content,this.categoryBoardId=this.itemList.boardId,this.categoryBoardNm=this.itemList.boardNm,this.add1imgFileId=this.itemList.attr1,this.add2imgFileId=this.itemList.attr2,this.add3imgFileId=this.itemList.attr3,this.add1imgViewFileId=this.itemList.attr1CdnNm,this.add2imgViewFileId=this.itemList.attr2CdnNm,this.add3imgViewFileId=this.itemList.attr3CdnNm,this.subCategoryBoardCd=this.itemList.subBoardCd,this.subCategoryBoardNm=this.itemList.subBoardNm}})},openModal(t){"main"===t?(this.getCategoryList(),this.categoryModalOpen=!0):"sub"===t&&(this.getSubCategoryList(),this.subCategoryModalOpen=!0)},closeCategory(t,e){"main"===e?(this.categoryBoardId=t.boardId,this.categoryBoardNm=t.boardNm,t.boardId!==this.subCategoryCheck&&(this.subCategoryCheck=t.boardId,this.subCategoryBoardCd="",this.subCategoryBoardNm=""),this.categoryModalOpen=!1):"sub"===e&&(this.subCategoryBoardCd=t.subBoardCd,this.subCategoryBoardNm=t.subBoardNm,this.subCategoryModalOpen=!1)},addPhoto(t){switch(t){case"add1":this.uploadType="add1";break;case"add2":if("Y"!=this.userSubscribeYn)return void(this.subscribeMessage=!0);this.uploadType="add2";break;case"add3":if("Y"!=this.userSubscribeYn)return void(this.subscribeMessage=!0);this.uploadType="add3";break}f.V1.getPhoto({allowEditing:!1,source:f.oK.Photos,resultType:f.dk.Uri}).then((async t=>{let e=await fetch(t.webPath).then((t=>t.blob()));const i=new File([e],"fileName."+t.format,{lastModified:new Date,type:e.type});this.Attachfiles.push(i),this.$nextTick((()=>{this.insertFile(this.uploadType)}))}))},onFileChange:function(t){const e=t.target.files||t.dataTransfer.files;if(!e.length)return;const i=["image/jpg","image/jpeg","image/png","image/gif"],a=e[0];i.includes(a.type)?(this.Attachfiles.push(e[0]),this.$nextTick((()=>{this.insertFile(this.uploadType)}))):this.warningAlert("이미지 파일만 업로드 가능해요")},insertFile(t){this.showLoading(),(0,y.oA)({url:"/setImage",param:{},file:this.Attachfiles,then:e=>{switch(this.Attachfiles=[],this.imgFileId=e.cdnNm,t){case"add1":this.add1imgFileId=e.fileId,this.add1imgViewFileId=e.cdnNm;break;case"add2":this.add2imgFileId=e.fileId,this.add2imgViewFileId=e.cdnNm;break;case"add3":this.add3imgFileId=e.fileId,this.add3imgViewFileId=e.cdnNm;break}this.loading.dismiss()}})},async confirmBtn(t){if(this.isSaving)return;this.isSaving=!0;const e=await this.alertController.create({header:"",message:"게시글을 작성합니다.",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{this.isSaving=!1,this.checkDisabled=!0}},{text:"완료",handler:()=>{let e;switch(t){case"new":e="/setCommunityInsert";break;case"edit":e="/setCommunityUpdate";break}(0,y.Yu)({url:e,param:this.getResult(),then:e=>{this.CategoryBoardId="",this.title="",this.content="",this.imgFileId="",this.add1imgFileId=null,this.add2imgFileId=null,this.add3imgFileId=null,this.add1imgViewFileId=null,this.add2imgViewFileId=null,this.add3imgViewFileId=null,this.categoryBoardId="",this.categoryBoardNm="",this.subCategoryBoardNm="",this.isSaving=!1,"new"===t?((0,y.y5)({article:e.articleKey,type:"communityWrite"}),this.$router.push("/communityView")):((0,y.y5)({article:y.bc.article,type:"communityWrite"}),this.$router.push("/communityView")),setTimeout((()=>{this.checkDisabled=!0}),500)}})}}]});return e.present()},goRouter(t){"guide"==t?((0,y.Dh)({page:"communityWrite",type:y._3.type}),this.$router.push("/notificationCommunityGuide")):"store"==t&&(this.subscribeMessage=!1,(0,y.EY)({subscribeYn:"Y"}),this.$router.push("/store"))},async showLoading(){this.loading=await this.loadingController.create({message:"Loading...",duration:0}),await this.loading.present()},async warningAlert(t){const e=await this.alertController.create({header:"",subHeader:"",message:t,buttons:["OK"]});return e.present()},async presentAlertConfirm(){const t=await this.alertController.create({header:"",message:"이 화면에서 나가면 입력한 내용은 저장되지 않습니다.",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"나가기",handler:()=>{this.$router.push("/community")}}]});return t.present()}}};var N=i(83744);const B=(0,N.Z)(_,[["render",p]]),W=B}}]);
//# sourceMappingURL=3678.ccef13de.js.map