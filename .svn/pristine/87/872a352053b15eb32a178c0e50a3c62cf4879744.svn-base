"use strict";(self["webpackChunknavy"]=self["webpackChunknavy"]||[]).push([[3368],{64963:(e,t,i)=>{var a,s;i.d(t,{ez:()=>s}),function(e){e["Documents"]="DOCUMENTS",e["Data"]="DATA",e["Library"]="LIBRARY",e["Cache"]="CACHE",e["External"]="EXTERNAL",e["ExternalStorage"]="EXTERNAL_STORAGE"}(a||(a={})),function(e){e["UTF8"]="utf8",e["ASCII"]="ascii",e["UTF16"]="utf16"}(s||(s={}))},13636:(e,t,i)=>{i.d(t,{Z:()=>c});var a=i(66252),s=i(3577);const l={class:"message"},o={key:0},n={class:"modal-footer"};function d(e,t,i,d,r,u){const m=(0,a.up)("ion-toolbar"),c=(0,a.up)("custom-button"),h=(0,a.up)("ion-col"),g=(0,a.up)("ion-row"),p=(0,a.up)("ion-content"),y=(0,a.up)("ion-modal");return(0,a.wg)(),(0,a.j4)(y,{ref:"modal","is-open":i.isOpen,onIonModalDidDismiss:u.ionModalDidDismiss},{default:(0,a.w5)((()=>[null!=i.title||""==i.title?((0,a.wg)(),(0,a.j4)(m,{key:0},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(i.title||"제목"),1)])),_:1})):(0,a.kq)("",!0),(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a._)("div",l,[(0,a._)("p",null,(0,s.zw)(i.message||"기본 메세지"),1),null!=i.subMessage||""==i.subMessage?((0,a.wg)(),(0,a.iD)("p",o,(0,s.zw)(i.subMessage),1)):(0,a.kq)("",!0)]),(0,a._)("div",n,[(0,a.Wm)(g,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{margin:"0 auto","align-items":"center"}},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{shape:"round",fill:"outline",color:"light",onClick:u.ionModalDidDismiss},{default:(0,a.w5)((()=>[(0,a.Uk)("취소 ")])),_:1},8,["onClick"]),(0,a.Wm)(c,{shape:"round",onClick:u.handleClickBtn,disabled:i.disabledCheck},{default:(0,a.w5)((()=>[(0,a.Uk)((0,s.zw)(i.btnName),1)])),_:1},8,["onClick","disabled"])])),_:1})])),_:1})])])),_:1})])),_:1})])),_:1},8,["is-open","onIonModalDidDismiss"])}const r={name:"AlertMessageModal",props:{isOpen:{type:Boolean},disabledCheck:{type:Boolean},title:{type:String},message:{type:String},subMessage:{type:String},btnName:{type:String},height:{type:Number,default:300}},watch:{height(e){this.modalHeight(e)}},mounted(){this.modalHeight(this.height)},methods:{modalHeight(e){const t=this.$refs.modal.$el;t.style.setProperty("--max-height",e+"px")},ionModalDidDismiss(){this.$emit("ionModalDidDismiss")},handleClickBtn(){this.$emit("handleClickBtn")}}};var u=i(83744);const m=(0,u.Z)(r,[["render",d],["__scopeId","data-v-8ea9cca8"]]),c=m},53943:(e,t,i)=>{i.r(t),i.d(t,{default:()=>B});i(33948);var a=i(66252),s=i(3577),l=i(49963);const o={class:"row-box"},n={class:"btn-tab-group"},d={key:0},r={key:1},u={key:0},m={key:1},c={class:"row-box"},h={class:"row-box"},g={class:"layout-container"};function p(e,t,i,p,y,b){const w=(0,a.up)("BackButton"),C=(0,a.up)("ion-buttons"),f=(0,a.up)("ion-title"),k=(0,a.up)("ion-toolbar"),I=(0,a.up)("ion-header"),_=(0,a.up)("GuideBanner"),F=(0,a.up)("ion-button"),N=(0,a.up)("ion-input"),M=(0,a.up)("ion-note"),B=(0,a.up)("ion-item"),W=(0,a.up)("ion-textarea"),A=(0,a.up)("ion-list"),D=(0,a.up)("AddPhotoButton"),L=(0,a.up)("ion-col"),V=(0,a.up)("ion-row"),v=(0,a.up)("ion-grid"),O=(0,a.up)("SelectCategoryItem"),S=(0,a.up)("ion-content"),T=(0,a.up)("ion-page"),U=(0,a.up)("ion-modal"),x=(0,a.up)("ion-footer"),E=(0,a.up)("AlertMessageModal");return(0,a.wg)(),(0,a.j4)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(w,{onEvent:t[0]||(t[0]=e=>b.presentAlertConfirm()),custom:!0})])),_:1}),(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Uk)(" 커뮤니티 글 "+(0,s.zw)("edit"!==this.type?"작성":"수정"),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,{class:"ion-padding"},{default:(0,a.w5)((()=>[(0,a.Wm)(_,{onEvent:t[1]||(t[1]=e=>b.goRouter("guide")),title:"커뮤니티를 더 즐기기 위한 가이드 보기 배너"}),(0,a._)("div",o,[(0,a._)("div",n,[(0,a.Wm)(F,{onClick:t[2]||(t[2]=(0,l.iM)((e=>b.openModal("main")),["stop"])),fill:"outline"},{default:(0,a.w5)((()=>[""===y.categoryBoardId?((0,a.wg)(),(0,a.iD)("span",d,"게시판 선택하기")):((0,a.wg)(),(0,a.iD)("span",r,(0,s.zw)(y.categoryBoardNm),1))])),_:1}),(0,a.Wm)(F,{onClick:t[3]||(t[3]=(0,l.iM)((e=>b.openModal("sub")),["stop"])),fill:"outline",disabled:""===y.categoryBoardId},{default:(0,a.w5)((()=>[""===y.subCategoryBoardCd?((0,a.wg)(),(0,a.iD)("span",u,"서브게시판 선택하기")):((0,a.wg)(),(0,a.iD)("span",m,(0,s.zw)(y.subCategoryBoardNm),1))])),_:1},8,["disabled"])])]),(0,a._)("div",c,[(0,a.Wm)(A,null,{default:(0,a.w5)((()=>[(0,a.Wm)(B,{ref:"nick",counter:"true",counterFormatter:y.COUNTE_FORMAT,class:"input-field"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{type:"text",maxlength:"8",placeholder:"닉네임은 최대 8자까지 가능해요",modelValue:y.communityNick,"onUpdate:modelValue":t[4]||(t[4]=e=>y.communityNick=e),onIonChange:t[5]||(t[5]=e=>y.COM_VALIDATION(y.communityNick,"nick",this))},null,8,["modelValue"]),(0,a.Wm)(M,{slot:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)("닉네임이 올바르지 않습니다.")])),_:1})])),_:1},8,["counterFormatter"]),(0,a.Wm)(B,{ref:"title",counter:"true",counterFormatter:y.COUNTE_FORMAT,class:"input-field"},{default:(0,a.w5)((()=>[(0,a.Wm)(N,{type:"text",maxlength:"40",placeholder:"제목은 최대 40자까지 가능해요",modelValue:y.title,"onUpdate:modelValue":t[6]||(t[6]=e=>y.title=e),onIonChange:t[7]||(t[7]=e=>y.COM_VALIDATION(y.title,"title",this))},null,8,["modelValue"]),(0,a.Wm)(M,{slot:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)("제목이 올바르지 않습니다.")])),_:1})])),_:1},8,["counterFormatter"]),(0,a.Wm)(B,{ref:"content",lines:"none",counter:"true",counterFormatter:y.COUNTE_FORMAT,class:"input-field"},{default:(0,a.w5)((()=>[(0,a.Wm)(W,{modelValue:y.content,"onUpdate:modelValue":t[8]||(t[8]=e=>y.content=e),rows:15,maxlength:"2000",onIonChange:t[9]||(t[9]=e=>y.COM_VALIDATION(y.content,"content",this)),placeholder:"매너를 지켜주세요.\n특정인이나 집단을 비하하거나 저격하는 행위,\n욕설 및 비방글은 삭제됩니다."},null,8,["modelValue"]),(0,a.Wm)(M,{slot:"error"},{default:(0,a.w5)((()=>[(0,a.Uk)("더이상 입력할수 없습니다.")])),_:1})])),_:1},8,["counterFormatter"])])),_:1})]),(0,a._)("div",h,[(0,a.Wm)(v,null,{default:(0,a.w5)((()=>[(0,a.Wm)(V,null,{default:(0,a.w5)((()=>[(0,a.Wm)(L,{size:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{onClick:t[10]||(t[10]=e=>b.addPhoto("add1")),name:y.add1imgViewFileId,required:!1},null,8,["name"])])),_:1}),(0,a.Wm)(L,{size:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{onClick:t[11]||(t[11]=e=>b.addPhoto("add2")),name:y.add2imgViewFileId,required:!1,subscribe:!0},null,8,["name"])])),_:1}),(0,a.Wm)(L,{size:"4"},{default:(0,a.w5)((()=>[(0,a.Wm)(D,{onClick:t[12]||(t[12]=e=>b.addPhoto("add3")),name:y.add3imgViewFileId,required:!1,subscribe:!0},null,8,["name"])])),_:1})])),_:1}),(0,a._)("input",{type:"file",onChange:t[13]||(t[13]=(...e)=>b.onFileChange&&b.onFileChange(...e)),ref:"photo",style:{display:"none"}},null,544)])),_:1})]),(0,a.Wm)(U,{ref:"modal","is-open":y.categoryModalOpen,onIonModalDidDismiss:t[14]||(t[14]=e=>y.categoryModalOpen=!1),"initial-breakpoint":1,breakpoints:[0,.15,.5,1]},{default:(0,a.w5)((()=>[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Uk)("카테고리를 선택해 주세요")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"ion-padding"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.categoryList,(e=>((0,a.wg)(),(0,a.j4)(O,{class:"row-box",key:e.boardId,item:e,onClick:t=>b.closeCategory(e,"main")},null,8,["item","onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"]),(0,a.Wm)(U,{ref:"modal","is-open":y.subCategoryModalOpen,onIonModalDidDismiss:t[15]||(t[15]=e=>y.subCategoryModalOpen=!1),"initial-breakpoint":1,breakpoints:[0,1],style:{"--height":"50%"}},{default:(0,a.w5)((()=>[(0,a.Wm)(T,null,{default:(0,a.w5)((()=>[(0,a.Wm)(I,null,{default:(0,a.w5)((()=>[(0,a.Wm)(k,{class:"text-left"},{default:(0,a.w5)((()=>[(0,a.Wm)(f,null,{default:(0,a.w5)((()=>[(0,a.Uk)("서브 카테고리를 선택해 주세요")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(S,null,{default:(0,a.w5)((()=>[(0,a.Wm)(A,{class:"ion-padding"},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(y.subCategoryList,(e=>((0,a.wg)(),(0,a.j4)(O,{class:"row-box",key:e.subBoardCd,item:e,type:"sub",onClick:t=>b.closeCategory(e,"sub")},null,8,["item","onClick"])))),128))])),_:1})])),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a._)("div",g,[(0,a.Wm)(F,{color:"primary",shape:"round",expand:"block",size:"large",onClick:t[16]||(t[16]=e=>b.checkBth(this.type)),disabled:!b.checkBtnDisabled},{default:(0,a.w5)((()=>[(0,a.Uk)(" 글 "+(0,s.zw)("edit"===this.state?"수정하기":"작성하기"),1)])),_:1},8,["disabled"])])])),_:1}),(0,a.Wm)(E,{"is-open":y.subscribeMessage,title:"NAVY+",message:"회원님은 현재 구독 상태가 아닙니다.",subMessage:"NAVY PASS 에 가입하시면 더많은 혜택을 받으실수 있습니다.",btnName:"이동",height:250,disabledCheck:!1,onIonModalDidDismiss:t[17]||(t[17]=e=>y.subscribeMessage=!1),onHandleClickBtn:t[18]||(t[18]=e=>b.goRouter("store"))},null,8,["is-open","message","subMessage"])])),_:1})}i(57658),i(26699);var y=i(28151),b=i(52677),w=i(54939),C=i(55866),f=i(2982),k=i(96826),I=i(29895);i(64963);(0,I.fo)("Filesystem",{web:()=>i.e(3176).then(i.bind(i,33176)).then((e=>new e.FilesystemWeb))});var _=i(13636);const F={inject:["alertController","loadingController"],components:{GuideBanner:b.Z,SelectCategoryItem:w.Z,AddPhotoButton:C.Z,PageLoadingCheck:f.Z,AlertMessageModal:_.Z},data(){return{COM_VALIDATION:y.QV,COUNTE_FORMAT:y.Kj,displayErrors:!1,title:"",content:"",communityNick:"익명",itemList:"",categoryList:"",categoryBoardId:"",categoryBoardNm:"",categoryModalOpen:!1,Attachfiles:[],mainFileId:"",uploadType:"",imgFileId:null,add1imgFileId:null,add2imgFileId:null,add3imgFileId:null,add1imgViewFileId:null,add2imgViewFileId:null,add3imgViewFileId:null,type:"",isNicknameValid:!0,isSaving:!1,subCategoryList:"",subCategoryModalOpen:!1,subCategoryBoardCd:"",subCategoryBoardNm:"",subCategoryCheck:"",nickValid:!0,checkDisabled:!0,userSubscribeYn:"",subscribeMessage:!1,messageModal:!1}},ionViewWillEnter(){this.type=y._3.type,this.$nextTick((()=>{this.communityNick=localStorage.getItem("SS_USER_COMMUNITY_NICK"),this.userSubscribeYn=localStorage.getItem("SS_USER_SUBSCRIBE_YN")})),"edit"===this.type?(this.getUpdate(),this.getCategoryList()):"new"===this.type&&(this.getNickname(),this.imgFileId=null,this.add1imgFileId=null,this.add2imgFileId=null,this.add3imgFileId=null,this.add1imgViewFileId=null,this.add2imgViewFileId=null,this.add3imgViewFileId=null)},ionViewDidLeave(){},mounted(){},computed:{validate(){return this.COM_VALIDATION([{value:this.communityNick,type:"nick"},{value:this.title,type:"title"},{value:this.content,type:"content"}])},checkBtnDisabled(){return""!==this.title&&""!==this.content&&!0===this.checkDisabled}},methods:{checkBth(e){console.log(e),this.validate?""===this.categoryBoardId?this.warningAlert("카테고리를 선택해주세요."):""!==this.title||this.validate?""===this.content?this.warningAlert("내용을 입력해주세요."):this.confirmBtn(e,this.checkDisabled=!1):this.warningAlert("제목을 입력해주세요."):this.warningAlert("잘못된 항목이 있습니다. 내용을 다시 확인해주세요.")},getResult(){let e={};return e.articleKey=y.bc.article,e.communityNick=this.communityNick,e.boardId=this.categoryBoardId?this.categoryBoardId:null,e.subBoardCd=this.subCategoryBoardCd,e.title=this.title,e.content=this.content,e.attr1=this.add1imgFileId?this.add1imgFileId:null,e.attr2=this.add2imgFileId?this.add2imgFileId:null,e.attr3=this.add3imgFileId?this.add3imgFileId:null,e},getNickname(){(0,y.Yu)({url:"/getCommunityUserNick",param:{},then:e=>{this.communityNick=e[0].communityLastnick}})},getCategoryList(){(0,y.Yu)({url:"/getCategoryList",param:{},then:e=>{this.categoryList=e}})},getSubCategoryList(){(0,y.Yu)({url:"/getSubCategoryList",param:{boardId:this.categoryBoardId},then:e=>{this.subCategoryList=e}})},getUpdate(){(0,y.Yu)({url:"/getCommunityDetail",param:{articleKey:y._3.article,type:y._3.type,viewAddYn:"N"},then:e=>{this.itemList=e.articleMap,this.communityNick=this.itemList.communityNick,this.title=this.itemList.title,this.content=this.itemList.content,this.categoryBoardId=this.itemList.boardId,this.categoryBoardNm=this.itemList.boardNm,this.add1imgFileId=this.itemList.attr1,this.add2imgFileId=this.itemList.attr2,this.add3imgFileId=this.itemList.attr3,this.add1imgViewFileId=this.itemList.attr1CdnNm,this.add2imgViewFileId=this.itemList.attr2CdnNm,this.add3imgViewFileId=this.itemList.attr3CdnNm,this.subCategoryBoardCd=this.itemList.subBoardCd,this.subCategoryBoardNm=this.itemList.subBoardNm}})},openModal(e){"main"===e?(this.getCategoryList(),this.categoryModalOpen=!0):"sub"===e&&(this.getSubCategoryList(),this.subCategoryModalOpen=!0)},closeCategory(e,t){"main"===t?(this.categoryBoardId=e.boardId,this.categoryBoardNm=e.boardNm,e.boardId!==this.subCategoryCheck&&(this.subCategoryCheck=e.boardId,this.subCategoryBoardCd="",this.subCategoryBoardNm=""),this.categoryModalOpen=!1):"sub"===t&&(this.subCategoryBoardCd=e.subBoardCd,this.subCategoryBoardNm=e.subBoardNm,this.subCategoryModalOpen=!1)},addPhoto(e){switch(e){case"add1":this.uploadType="add1";break;case"add2":if("Y"!=this.userSubscribeYn)return void(this.subscribeMessage=!0);this.uploadType="add2";break;case"add3":if(console.log(),"Y"!=this.userSubscribeYn)return void(this.subscribeMessage=!0);this.uploadType="add3";break}k.V1.getPhoto({allowEditing:!1,source:k.oK.Photos,resultType:k.dk.Uri}).then((async e=>{let t=await fetch(e.webPath).then((e=>e.blob()));const i=new File([t],"fileName."+e.format,{lastModified:new Date,type:t.type});this.Attachfiles.push(i),this.$nextTick((()=>{this.insertFile(this.uploadType)}))}))},onFileChange:function(e){const t=e.target.files||e.dataTransfer.files;if(!t.length)return;const i=["image/jpg","image/jpeg","image/png","image/gif"],a=t[0];i.includes(a.type)?(this.Attachfiles.push(t[0]),this.$nextTick((()=>{this.insertFile(this.uploadType)}))):this.warningAlert("이미지 파일만 업로드 가능해요")},insertFile(e){this.showLoading(),(0,y.oA)({url:"/setImage",param:{},file:this.Attachfiles,then:t=>{switch(this.Attachfiles=[],this.imgFileId=t.cdnNm,e){case"add1":this.add1imgFileId=t.fileId,this.add1imgViewFileId=t.cdnNm;break;case"add2":this.add2imgFileId=t.fileId,this.add2imgViewFileId=t.cdnNm;break;case"add3":this.add3imgFileId=t.fileId,this.add3imgViewFileId=t.cdnNm;break}this.loading.dismiss()}})},async confirmBtn(e){if(console.log(e),this.isSaving)return;this.isSaving=!0;const t=await this.alertController.create({header:"",message:"게시글을 작성합니다.",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{this.isSaving=!1,this.checkDisabled=!0}},{text:"완료",handler:()=>{let t;switch(e){case"new":t="/setCommunityInsert";break;case"edit":t="/setCommunityUpdate";break}(0,y.Yu)({url:t,param:this.getResult(),then:t=>{this.CategoryBoardId="",this.title="",this.content="",this.imgFileId="",this.add1imgFileId=null,this.add2imgFileId=null,this.add3imgFileId=null,this.add1imgViewFileId=null,this.add2imgViewFileId=null,this.add3imgViewFileId=null,this.categoryBoardId="",this.categoryBoardNm="",this.subCategoryBoardNm="",this.isSaving=!1,"new"===e?((0,y.y5)({article:t.articleKey,type:"communityWrite"}),this.$router.push("/communityView")):((0,y.y5)({article:y.bc.article,type:"communityWrite"}),this.$router.push("/communityView")),setTimeout((()=>{this.checkDisabled=!0}),500)}})}}]});return t.present()},goRouter(e){"guide"==e?((0,y.Dh)({page:"communityWrite",type:y._3.type}),this.$router.push("/notificationCommunityGuide")):"store"==e&&(this.subscribeMessage=!1,(0,y.EY)({subscribeYn:"Y"}),this.$router.push("/store"))},async showLoading(){this.loading=await this.loadingController.create({message:"Loading...",duration:0}),await this.loading.present()},async warningAlert(e){const t=await this.alertController.create({header:"",subHeader:"",message:e,buttons:["OK"]});return t.present()},async presentAlertConfirm(){const e=await this.alertController.create({header:"",message:"이 화면에서 나가면 입력한 내용은 저장되지 않습니다.",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"나가기",handler:()=>{this.$router.push("/community")}}]});return e.present()}}};var N=i(83744);const M=(0,N.Z)(F,[["render",p]]),B=M}}]);
//# sourceMappingURL=3368-legacy.b2e53af8.js.map