"use strict";(self["webpackChunknavy"]=self["webpackChunknavy"]||[]).push([[6004],{31405:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(66252);const l={class:"join-title"};function s(e,t,n,s,i,a){const r=(0,o.up)("ion-text");return(0,o.wg)(),(0,o.iD)("div",l,[(0,o.Wm)(r,{color:"light"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,[(0,o.WI)(e.$slots,"title",{},void 0,!0)])])),_:3}),(0,o.Wm)(r,{color:"light"},{default:(0,o.w5)((()=>[(0,o._)("p",null,[(0,o.WI)(e.$slots,"desc",{},void 0,!0)])])),_:3})])}var i=n(27783);const a={name:"JoinTitle",components:{IonText:i.yW}};var r=n(83744);const d=(0,r.Z)(a,[["render",s],["__scopeId","data-v-2fe7c318"]]),c=d},2982:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(66252);function l(e,t,n,l,s,i){const a=(0,o.up)("ion-spinner");return(0,o.wg)(),(0,o.j4)(a,{name:"lines"})}const s={name:"PageLoadingCheck"};var i=n(83744);const a=(0,i.Z)(s,[["render",l]]),r=a},96004:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var o=n(66252),l=n(3577);const s={class:"layout-container"},i=(0,o._)("br",null,null,-1),a={class:"layout-container"},r={class:"btn-group"},d=(0,o._)("div",{id:"profileLocationMap",style:{width:"100%",height:"80%"}},null,-1),c={class:"layout-container"},u={class:"v-middle"},p={class:"btn-group"};function h(e,t,h,m,g,w){const v=(0,o.up)("BackButton"),f=(0,o.up)("ion-buttons"),k=(0,o.up)("ion-title"),L=(0,o.up)("ion-toolbar"),_=(0,o.up)("ion-header"),C=(0,o.up)("JoinTitle"),W=(0,o.up)("ion-input"),y=(0,o.up)("ion-img"),b=(0,o.up)("ion-button"),A=(0,o.up)("ion-item"),x=(0,o.up)("ion-list"),D=(0,o.up)("ion-content"),j=(0,o.up)("ion-ripple-effect"),O=(0,o.up)("ion-footer"),B=(0,o.up)("ion-icon"),I=(0,o.up)("PageLoadingCheck"),M=(0,o.up)("ion-text"),T=(0,o.up)("ion-row"),U=(0,o.up)("ion-grid"),G=(0,o.up)("custom-button"),S=(0,o.up)("ion-modal"),V=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(V,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("지역설정")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(D,null,{default:(0,o.w5)((()=>[(0,o._)("div",s,[(0,o.Wm)(C,null,{title:(0,o.w5)((()=>[(0,o.Uk)(" 내가 살고있는 지역을 "),i,(0,o.Uk)(" 설정해 주세요! ")])),desc:(0,o.w5)((()=>[(0,o.Uk)(" 가까운 거리의 상대를 추천해드려요!")])),_:1}),(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(A,{lines:"none",class:"input-field has-icon-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(W,{onClick:t[0]||(t[0]=e=>w.openModal("address")),type:"text",placeholder:"구 까지만 표시돼요!",modelValue:g.locationView,"onUpdate:modelValue":t[1]||(t[1]=e=>g.locationView=e),readonly:""},null,8,["modelValue"]),(0,o.Wm)(b,{fill:"clear",slot:"end",onClick:t[2]||(t[2]=e=>w.openModal("address"))},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{src:n(12596)},null,8,["src"])])),_:1})])),_:1})])),_:1})])])),_:1}),(0,o.Wm)(O,{class:"join-footer"},{default:(0,o.w5)((()=>{var e;return[(0,o._)("div",a,[(0,o._)("div",r,[(0,o.Wm)(b,{color:"primary",size:"large",expand:"block",shape:"round",disabled:!(null!==(e=g.selectedAddressGu)&&void 0!==e&&e.length),onClick:w.validateAndNavigate},{default:(0,o.w5)((()=>[(0,o.Wm)(j),(0,o.Uk)(" 저장 ")])),_:1},8,["disabled","onClick"])])])]})),_:1}),(0,o.Wm)(S,{class:"location-modal","is-open":g.modalOpen,onIonModalDidDismiss:t[4]||(t[4]=e=>g.modalOpen=!1),onIonModalDidPresent:w.mapOpen,"initial-breakpoint":1,breakpoints:[0,1]},{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(L,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(b,{onClick:t[3]||(t[3]=e=>w.closeModal())},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{slot:"icon-only",icon:g.chevronBack},null,8,["icon"])])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("지도에서 위치 확인")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(D,{fullscreen:!0},{default:(0,o.w5)((()=>[!1!==g.lodingCheck?((0,o.wg)(),(0,o.j4)(I,{key:0,style:{display:"flex","align-items":"center","justify-content":"center",margin:"0 auto",height:"80%"}})):(0,o.kq)("",!0),d])),_:1}),(0,o.Wm)(O,{class:"location-modal-footer",style:{height:"110px","background-color":"#191a39",padding:"5px"}},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.Wm)(U,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"ion-align-items-end ion-justify-content-between",style:{padding:"0 15px 0 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(M,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,l.zw)(g.locationView),1)])),_:1}),(0,o.Wm)(M,{color:"light",onClick:w.jibunGuCheck},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{icon:g.swapHorizontalOutline,class:"v-middle"},null,8,["icon"]),(0,o._)("span",u,(0,l.zw)(g.checkBtnText),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o._)("div",p,[(0,o.Wm)(G,{color:"primary",size:"large",expand:"block",shape:"round",onClick:w.saveLocationBtn},{default:(0,o.w5)((()=>[(0,o.Uk)(" 이 위치로 주소 설정 ")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["is-open","onIonModalDidPresent"])])),_:1})}n(57658);var m=n(18903),g=n(28151),w=n(31405),v=n(2982);const f={name:"ProfileLocation",inject:["alertController"],components:{JoinTitle:w.Z,PageLoadingCheck:v.Z},data(){return{chevronBack:m.Mny,swapHorizontalOutline:m._hl,inputType:"",message:"",showModal:!1,modalOpen:!1,visible:!1,locationView:"",currLat:"",currLon:"",selectedLat:null,selectedLng:null,selectedjibunAddress:null,selectedroadAddress:null,selectedAddressGu:null,selectedjibunAddressDong:null,selectedroadAddressDong:null,checkBtn:"dong",checkBtnText:"구까지 표시",lodingCheck:!1,map:null}},ionViewWillEnter(){this.getSelectList(),this.getLoginUser()},ionViewDidLeave(){this.map=null},mounted(){},methods:{getResult(){let e={};return e.addr1=this.selectedjibunAddressDong,e.shotaddr1=this.selectedAddressGu,e.addr2="",e.shotaddr2="",e.lat=this.selectedLat,e.lon=this.selectedLng,e},getSelectList(){(0,g.Yu)({url:"/getSettingUserInfo",param:{},then:e=>{this.address=e.addrLiveSum}})},openModal(e){this.inputType=e,this.lodingCheck=!0,this.modalOpen=!0},mapOpen(){this.lodingCheck=!1,this.getLoginUser(),this.$nextTick((()=>{this.naverMap(this.currLat,this.currLon)}))},closeModal(){this.modalOpen=!1},validateAndNavigate(){""!==this.locationView.trim()?this.confirmBtn():this.warningAlert("주소를 입력하지 않았습니다.")},async confirmBtn(){const e=await this.alertController.create({header:"",message:"저장하시겠습니까?",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"저장",handler:()=>{(0,g.Yu)({url:"/getUserUpdate",param:this.getResult(),then:e=>{"Y"===e.successYn?((0,g.DR)({pageType:"profileEdit"}),this.$router.push("/profile"),this.warningAlert("수정완료")):this.warningAlert("수정실패")}})}}]});return e.present()},async presentAlertConfirm(){const e=await this.alertController.create({header:"",message:"이 화면에서 나가면 입력한 내용은 저장되지 않습니다.",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"나가기",handler:()=>{this.$router.go(-1)}}]});return e.present()},async warningAlert(e){const t=await this.alertController.create({header:"",subHeader:"",message:e,buttons:["OK"]});return t.present()},saveLocationBtn(){this.modalOpen=!1},jibunGuCheck(){"dong"===this.checkBtn?(null!==this.selectedAddressGu&&(this.locationView=this.selectedAddressGu),this.checkBtnText="동까지 표시",this.checkBtn="gu"):(null!==this.selectedjibunAddressDong&&(this.locationView=this.selectedjibunAddressDong),this.checkBtnText="구까지 표시",this.checkBtn="dong")},naverMap(e,t){let n=this;const o=window.naver.maps;let l={center:new o.LatLng(e,t),zoom:17,zoomControl:!0,zoomControlOptions:{style:o.ZoomControlStyle.LARGE,position:o.Position.TOP_RIGHT}};n.map=new o.Map("profileLocationMap",l);const s=new o.Marker({position:n.map.getCenter(),map:n.map,icon:{url:"https://navermaps.github.io/maps.js.ncp/docs/img/example/pin_default.png",size:new o.Size(24,37),scaledSize:new o.Size(24,37),origin:new o.Point(0,0),anchor:new o.Point(12,37)}});this.selectedLat=e,this.selectedLng=t;let i=new o.LatLng(e,t);this.reverseGeocodes(i),o.Event.addListener(n.map,"drag",(()=>{s.setPosition(n.map.getCenter())})),o.Event.addListener(n.map,"dragend",(e=>{this.selectedLat=n.map.getCenter().y,this.selectedLng=n.map.getCenter().x;let t=new o.LatLng(n.map.getCenter().y,n.map.getCenter().x);this.reverseGeocodes(t)}))},getLoginUser(){(0,g.Yu)({url:"/getOpenChatUserAddr",param:{},then:e=>{this.addrItem=e[0],this.locationView=this.addrItem.addrLiveSum,null===this.addrItem.currLat||null===this.addrItem.currLon?(this.currLat=this.addrItem.currLat,this.currLon=this.addrItem.currLon):(this.currLat=this.addrItem.lat,this.currLon=this.addrItem.lon)}})},reverseGeocodes(e){let t=this;const n=window.naver.maps;n.Service.reverseGeocode({coords:e,orders:[n.Service.OrderType.ADDR,n.Service.OrderType.ROAD_ADDR].join(",")},(function(e,o){if(e===n.Service.Status.ERROR)return alert("Something Wrong!");let l=o.v2.results.length>1?1:0;t.selectedAddressGu=o.v2.results[l].region.area1.name+" "+o.v2.results[l].region.area2.name,t.selectedjibunAddressDong=o.v2.results[l].region.area1.name+" "+o.v2.results[l].region.area2.name+" "+o.v2.results[l].region.area3.name,t.selectedroadAddressDong=o.v2.results[l].region.area1.name+" "+o.v2.results[l].region.area2.name+" "+o.v2.results[l].land.name,"dong"===t.checkBtn?t.locationView=t.selectedjibunAddressDong:t.locationView=t.selectedAddressGu}))}}};var k=n(83744);const L=(0,k.Z)(f,[["render",h]]),_=L},12596:(e,t,n)=>{e.exports=n.p+"img/icon_location.8c5560ed.svg"}}]);
//# sourceMappingURL=6004-legacy.505cae7f.js.map