"use strict";(self["webpackChunknavy"]=self["webpackChunknavy"]||[]).push([[1284],{74787:(e,t,n)=>{n.r(t),n.d(t,{default:()=>R});n(33948);var i=n(66252),o=n(3577);const s={class:"row-box"},l={class:"row-box"},m={class:"row-box"},a=(0,i._)("span",null,"투표하기",-1),r={key:0,style:{"margin-left":"5px"}},d={key:0,class:"row-box"},h={key:0,class:"row-box"},c={key:0,class:"row-box"},u=(0,i._)("div",{style:{height:"100px","z-index":"-1"}},null,-1);function p(e,t,p,g,C,y){const w=(0,i.up)("BackButton"),b=(0,i.up)("ion-buttons"),I=(0,i.up)("ion-title"),f=(0,i.up)("ion-toolbar"),k=(0,i.up)("ion-header"),D=(0,i.up)("ion-img"),F=(0,i.up)("swiper-slide"),T=(0,i.up)("swiper"),B=(0,i.up)("ion-text"),U=(0,i.up)("ion-icon"),x=(0,i.up)("custom-button"),v=(0,i.up)("ion-item-group"),L=(0,i.up)("CommentAvatar"),A=(0,i.up)("CommentContent"),K=(0,i.up)("CommentReplyForm"),_=(0,i.up)("CommentItem"),$=(0,i.up)("CommentList"),E=(0,i.up)("EmptyBox"),Y=(0,i.up)("ion-infinite-scroll-content"),V=(0,i.up)("ion-infinite-scroll"),R=(0,i.up)("ion-content"),S=(0,i.up)("PageLoadingCheck"),N=(0,i.up)("CommunityViewSendComment"),P=(0,i.up)("ion-footer"),W=(0,i.up)("ion-page");return(0,i.wg)(),(0,i.j4)(W,null,{default:(0,i.w5)((()=>[(0,i.Wm)(k,null,{default:(0,i.w5)((()=>[(0,i.Wm)(f,null,{default:(0,i.w5)((()=>[(0,i.Wm)(b,{slot:"start"},{default:(0,i.w5)((()=>[(0,i.Wm)(w)])),_:1}),(0,i.Wm)(I,null,{default:(0,i.w5)((()=>[(0,i.Uk)((0,o.zw)(C.BoardDetail.nick)+"님",1)])),_:1})])),_:1})])),_:1}),!1!==C.lodingCheck?((0,i.wg)(),(0,i.j4)(R,{key:0,ref:"myContent"},{default:(0,i.w5)((()=>[(0,i.Wm)(v,{class:"ion-padding"},{default:(0,i.w5)((()=>[(0,i._)("div",null,[(0,i._)("div",s,[(0,i.Wm)(T,{pagination:{clickable:!0},modules:C.modules,autoplay:{delay:2e3,disableOnInteraction:!1,running:!0},style:{"border-radius":"15px"}},{default:(0,i.w5)((()=>[(0,i.Wm)(F,null,{default:(0,i.w5)((()=>[null!==this.attr1?((0,i.wg)(),(0,i.j4)(D,{key:0,src:"https://"+C.attr1,onIonError:t[0]||(t[0]=e=>e.srcElement.src=n(7189))},null,8,["src"])):(0,i.kq)("",!0)])),_:1}),null!==this.attr2&&""!==this.attr2?((0,i.wg)(),(0,i.j4)(F,{key:0},{default:(0,i.w5)((()=>[null!==this.attr2?((0,i.wg)(),(0,i.j4)(D,{key:0,src:"https://"+C.attr2,onIonError:t[1]||(t[1]=e=>e.srcElement.src=n(7189))},null,8,["src"])):(0,i.kq)("",!0)])),_:1})):(0,i.kq)("",!0),null!==this.attr3&&""!==this.attr3?((0,i.wg)(),(0,i.j4)(F,{key:1},{default:(0,i.w5)((()=>[null!==this.attr3?((0,i.wg)(),(0,i.j4)(D,{key:0,src:"https://"+C.attr3,onIonError:t[2]||(t[2]=e=>e.srcElement.src=n(7189))},null,8,["src"])):(0,i.kq)("",!0)])),_:1})):(0,i.kq)("",!0),null!==this.attr4&&""!==this.attr4?((0,i.wg)(),(0,i.j4)(F,{key:2},{default:(0,i.w5)((()=>[null!==this.attr4?((0,i.wg)(),(0,i.j4)(D,{key:0,src:"https://"+C.attr4,onIonError:t[3]||(t[3]=e=>e.srcElement.src=n(7189))},null,8,["src"])):(0,i.kq)("",!0)])),_:1})):(0,i.kq)("",!0)])),_:1},8,["modules"])]),(0,i._)("div",l,[(0,i._)("p",null,[(0,i.Wm)(B,{color:"light",class:"text-md",innerHTML:C.BoardDetail.replaceContent},null,8,["innerHTML"])])]),(0,i._)("div",m,[(0,i.Wm)(x,{color:"primary",expand:"block",size:"large",disabled:!C.checkDisabled,onClick:t[4]||(t[4]=e=>y.useContestVote(C.checkDisabled=!1))},{default:(0,i.w5)((()=>[a,C.coupon.quantity>0?((0,i.wg)(),(0,i.iD)("span",r," X "+(0,o.zw)(C.coupon.quantity),1)):(0,i.kq)("",!0),(0,i.Wm)(U,{slot:"end",icon:C.voteIcon},null,8,["icon"])])),_:1},8,["disabled"])])])])),_:1}),"7"!=C.BoardDetail.boardId?((0,i.wg)(),(0,i.j4)($,{key:0,"item-list":C.commentList},{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(C.commentList,((e,n)=>((0,i.wg)(),(0,i.j4)(_,{key:n},{avatar:(0,i.w5)((()=>[(0,i.Wm)(L,{thumbnail:e.cdnThumbNmIcon},null,8,["thumbnail"])])),content:(0,i.w5)((()=>[(0,i.Wm)(A,{isReply:!0,data:e,onUpdateComment:t=>y.commentReBtn("update",e),onDeleteComment:t=>y.presentAlertConfirm("comment",e),onPoliceComment:t=>y.policeBtn("comment",e),onReplyComment:t=>y.commentReBtn("re",e),onThumbsUp:t=>y.thumbsUpDown("up","comment",e.commentKey),onThumbsDown:t=>y.thumbsUpDown("down","comment",e.commentKey),onZoomImg:t=>y.openZoomedImage(e.cdnNm),disabled:!C.commentUpDownCheckDisabled},null,8,["data","onUpdateComment","onDeleteComment","onPoliceComment","onReplyComment","onThumbsUp","onThumbsDown","onZoomImg","disabled"]),C.updateComment===e&&"update"===C.reType?((0,i.wg)(),(0,i.iD)("div",d,[(0,i.Wm)(K,{value:e.contents,"onUpdate:value":t=>e.contents=t,reimgFileId:C.reimgFileId,reimgViewFileId:C.reimgViewFileId,onDeleteImg:t[5]||(t[5]=e=>y.imgDelete("reComment")),onAddPhoto:t[6]||(t[6]=e=>y.addPhoto("reComment")),onInput:t[7]||(t[7]=e=>y.limitComment(e)),onSendComment:t=>y.commentBtn("update",e.contents),onHandelFocus:t[8]||(t[8]=e=>C.emptyBox=!0),onHandelBlur:t[9]||(t[9]=e=>C.emptyBox=!1)},null,8,["value","onUpdate:value","reimgFileId","reimgViewFileId","onSendComment"])])):(0,i.kq)("",!0)])),default:(0,i.w5)((()=>[C.reComment===e&&"re"===C.reType?((0,i.wg)(),(0,i.iD)("div",h,[(0,i.Wm)(K,{value:C.childComment,"onUpdate:value":t[10]||(t[10]=e=>C.childComment=e),reimgFileId:C.reimgFileId,reimgViewFileId:C.reimgViewFileId,onAddPhoto:t[11]||(t[11]=e=>y.addPhoto("reComment")),onInput:t[12]||(t[12]=e=>y.limitComment(e)),onSendComment:t[13]||(t[13]=e=>y.commentBtn("child",C.childComment)),onHandelFocus:t[14]||(t[14]=e=>y.handeEmptyBox("f")),onHandelBlur:t[15]||(t[15]=e=>y.handeEmptyBox("b"))},null,8,["value","reimgFileId","reimgViewFileId"])])):(0,i.kq)("",!0),(0,i.Wm)(v,null,{default:(0,i.w5)((()=>[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(e.childCommentList,(e=>((0,i.wg)(),(0,i.j4)(_,{key:e.commentKey},{avatar:(0,i.w5)((()=>[(0,i.Wm)(L,{thumbnail:e.cdnThumbNmIcon},null,8,["thumbnail"])])),content:(0,i.w5)((()=>[(0,i.Wm)(A,{data:e,onUpdateComment:t=>y.commentReBtn("reUpdate",e),onDeleteComment:t=>y.presentAlertConfirm("comment",e),onPoliceComment:t=>y.policeBtn("comment",e),onThumbsUp:t=>y.thumbsUpDown("up","comment",e.commentKey),onThumbsDown:t=>y.thumbsUpDown("down","comment",e.commentKey),onZoomImg:t=>y.openZoomedImage(e.cdnNm)},null,8,["data","onUpdateComment","onDeleteComment","onPoliceComment","onThumbsUp","onThumbsDown","onZoomImg"]),C.reUpdateComment===e&&"reUpdate"===C.reType?((0,i.wg)(),(0,i.iD)("div",c,[(0,i.Wm)(K,{value:e.contents,"onUpdate:value":t=>e.contents=t,reimgFileId:C.reimgFileId,reimgViewFileId:C.reimgViewFileId,onDeleteImg:t[16]||(t[16]=e=>y.imgDelete("reComment")),onAddPhoto:t[17]||(t[17]=e=>y.addPhoto("reComment")),onInput:t[18]||(t[18]=e=>y.limitComment(e)),onSendComment:t=>y.commentBtn("reUpdate",e.contents),onHandelFocus:t[19]||(t[19]=e=>y.handeEmptyBox("f")),onHandelBlur:t[20]||(t[20]=e=>y.handeEmptyBox("b"))},null,8,["value","onUpdate:value","reimgFileId","reimgViewFileId","onSendComment"])])):(0,i.kq)("",!0)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["item-list"])):(0,i.kq)("",!0),u,(0,i.Wm)(E,{"is-open":C.emptyBox},null,8,["is-open"]),(0,i.Wm)(V,{threshold:"100px",onIonInfinite:y.ionInfinite},{default:(0,i.w5)((()=>[(0,i.Wm)(Y,{loadingText:"Please wait...",loadingSpinner:"bubbles"})])),_:1},8,["onIonInfinite"])])),_:1},512)):(0,i.kq)("",!0),!1===C.lodingCheck?((0,i.wg)(),(0,i.j4)(R,{key:1},{default:(0,i.w5)((()=>[(0,i.Wm)(S,{style:{display:"flex","align-items":"center","justify-content":"center",margin:"0 auto",height:"100%"}})])),_:1})):(0,i.kq)("",!0),(0,i.Wm)(P,{class:"no-padding"},{default:(0,i.w5)((()=>["7"!=C.BoardDetail.boardId?((0,i.wg)(),(0,i.j4)(N,{key:0,value:C.commentText,"onUpdate:value":t[22]||(t[22]=e=>C.commentText=e),newimgFileId:C.newimgFileId,newimgViewFileId:C.newimgViewFileId,onDeleteImg:t[23]||(t[23]=e=>y.imgDelete("newComment")),onAddPhoto:t[24]||(t[24]=e=>y.addPhoto("newComment")),onInput:t[25]||(t[25]=e=>y.limitComment(e)),onSendComment:t[26]||(t[26]=e=>y.commentBtn("new",C.commentText))},{default:(0,i.w5)((()=>[(0,i._)("input",{type:"file",onChange:t[21]||(t[21]=(...e)=>y.onFileChange&&y.onFileChange(...e)),ref:"photo",class:"is-blind"},null,544)])),_:1},8,["value","newimgFileId","newimgViewFileId"])):(0,i.kq)("",!0)])),_:1})])),_:1})}n(57658),n(74916),n(38862),n(26699),n(15306),n(68757);var g=n(18903),C=n(28151),y=n(57552),w=n(99304),b=n(50840),I=n.n(b),f=n(19313),k=n(74065),D=n(74823),F=n(19994),T=n(17094),B=n(91728),U=n(34525),x=n(25115),v=n(2982),L=n(76916),A=n(1316),K=n(23265),_=n(96826),$=n(53867);const E={name:"CommunityView",inject:["alertController","loadingController"],components:{Swiper:y.tq,SwiperSlide:y.o5,CommunityViewUserInfo:f.Z,CummunityViewThumbsUpDown:k.Z,CommunityViewSendComment:D.Z,CommentList:F.Z,CommentItem:T.Z,CommentReplyForm:B.Z,CommentAvatar:U.Z,CommentContent:x.Z,PageLoadingCheck:v.Z,EmptyBox:L.Z,MessageModal:A.Z},data(){return{voteIcon:$,modules:[w.pt,w.tl,w.W_],menuIcon:K,chatboxEllipsesOutline:g._Pt,bookmark:g.vjt,bookmarkOutline:g.eZy,imageOutline:g.Eu9,chatboxOutline:g.DMF,SS_USER_KEY:C.UD,noData:!0,BoardDetail:{},commentList:[],titleType:"",editType:"edit",bookmarkYn:"N",commentText:"",commentSelectItem:null,reComment:null,updateComment:null,reUpdateComment:null,upComment:"",reUpComment:"",childComment:"",mainFileId:null,Attachfiles:[],imgFileId:"",newimgFileId:null,reimgFileId:null,newimgViewFileId:null,reimgViewFileId:null,addPhotoType:"",articleId:"",visible:!1,reType:"",showReplyForm:!1,dynamicRow:0,likeCnt:0,badCnt:0,prevText:"",attr1:null,attr2:null,attr3:null,attr4:null,loading:null,userPhotoId:"",lodingCheck:!1,bookmarkCheckDisabled:!0,mainUpDownCheckDisabled:!0,commentUpDownCheckDisabled:!0,loadingTime:500,emptyBox:!1,messageOpen:!1,messageTextSend:"",dropYn:"",coupon:"",checkDisabled:!0,searchType:"first",lastCommentKey:"",isEndScroll:!1}},ionViewWillEnter(){this.getBoardDetail(),this.getUserCouponDataOne()},ionViewDidLeave(){this.beforeReset()},mounted(){},methods:{limitMessage(e){const t=e.target.value;this.messageTextSend=t},handeEmptyBox(e){this.emptyBox="f"===e},imgDelete(e){"reComment"===e?(this.reimgViewFileId=null,this.reimgFileId=null,this.imgFileId=""):"newComment"===e&&(this.newimgViewFileId=null,this.newimgFileId=null,this.imgFileId="")},beforeReset(){this.BoardDetail={},this.mainFileId=null,this.attr1=null,this.attr2=null,this.attr3=null,this.commentList=[],this.commentText="",this.dynamicRow=0,this.likeCnt=0,this.badCnt=0,this.reType="",this.userPhotoId="",this.childComment="",this.reComment=null,this.reimgFileId=null,this.imgFileId=""},getUserCouponDataOne(){(0,C.Yu)({url:"/getUserCouponDataOne",param:{couponCd:"CU012"},then:e=>{this.coupon=e,this.coupon.quantity>0?this.useTypeHeart="COUPON":this.useTypeHeart="HEART"}})},useContestVote(){(0,C.Yu)({url:"/useContestVote",param:{couponCd:"CU012",useType:this.useTypeHeart,itemCd:"HEART"===this.useTypeHeart?"IT012_01":"",pointCd:"HEART"===this.useTypeHeart?"BUY":"",contestType:1,targetUserKey:C.bc.targetUserKey},then:e=>{"NH"===e.successYn?this.warningAlertNH(e.message):"NI"==e.successYn?this.warningConfirm(e.message,(()=>{this.$router.push("/store")})):"N_START"==e.successYn?this.warningAlert(e.message):(this.warningAlert(e.message),this.$router.go(-1)),setTimeout((()=>{this.checkDisabled=!0}),500)}})},thumbsUpDown(e,t,n){this.showLoading(),"main"===t?(this.mainUpDownCheckDisabled=!1,(0,C.Yu)({url:"/setThumbsUpDown",param:{articleKey:C.bc.article,type:e,pageType:C.bc.type},then:e=>{this.likeCnt=e.likeCnt,this.badCnt=e.badCnt,setTimeout((()=>{this.loading.dismiss(),this.mainUpDownCheckDisabled=!0}),this.loadingTime)}})):"comment"===t&&(this.commentUpDownCheckDisabled=!1,(0,C.Yu)({url:"/setThumbsUpDown2",param:{articleKey:C.bc.article,commentKey:n,type:e,pageType:C.bc.type},then:()=>{setTimeout((()=>{this.loading.dismiss(),this.commentUpDownCheckDisabled=!0}),this.loadingTime),this.$nextTick((()=>{this.getBoardDetail()}))}}))},limitComment(e){const t=e.target.value,n=(t.match(/\n/g)||[]).length+1;if(n>10&&"deleteContentBackward"!==e.inputType)return e.preventDefault(),void this.warningAlert("줄바꿈은 10줄까지만 가능합니다");t!==this.prevText&&(this.dynamicRow=n),this.prevText=t},getResult(){let e={};return e},bookmarkEvent(){this.showLoading(),this.bookmarkCheckDisabled=!1,(0,C.Yu)({url:"/setCommunityBookmark",param:{articleKey:C.bc.article},then:e=>{this.bookmarkYn=e.bookmarkYn,setTimeout((()=>{this.loading.dismiss(),this.bookmarkCheckDisabled=!0}),this.loadingTime)}})},getBoardDetail(e=!1){let t=!1,n=sessionStorage.getItem("articleViewList"),i=new Date,o=new Date;n=n?JSON.parse(n):[];for(let s in n){n[s]["articleId"]===C.bc.article&&(t=!0);let e=(o.getTime()-new Date(n[s]["time"]).getTime())/6e4;e>1440&&n.splice(s,1)}t||(n.push({articleId:C.bc.article,time:i}),sessionStorage.setItem("articleViewList",JSON.stringify(n))),(0,C.Yu)({url:"/getContestDetail",param:{articleKey:C.bc.article,type:C.bc.type,viewAddYn:t?"Y":"N"},then:e=>{this.BoardDetail=e.articleMap,this.likeCnt=e.articleMap.likeCnt,this.badCnt=e.articleMap.badCnt,this.commentList=e.commentList,this.upComment=this.BoardDetail.contents,this.mainFileId=this.BoardDetail.attachFileId,this.attr1=this.BoardDetail.attr1CdnNm,this.attr2=this.BoardDetail.attr2CdnNm,this.attr3=this.BoardDetail.attr3CdnNm,this.attr4=this.BoardDetail.attr4CdnNm,this.bookmarkYn=this.BoardDetail.bookmarkYn,this.dropYn=this.BoardDetail.dropYn,this.userPhotoId=e.articleMap.cdnThumbNmIcon,this.lodingCheck=!0,this.replaceContentURL(),this.replaceCommentURL(),this.commentList.length>0&&(this.searchType="second",this.lastCommentKey=this.commentList[this.commentList.length-1].commentKey)}})},replaceContentURL(){let e=/(?:http(s?)?|www)\S+\w/g,t=this.BoardDetail.content.match(e),n=[...new Set(t)];this.BoardDetail.replaceContent=this.BoardDetail.content,Array.from(n).forEach((e=>{e.includes("http")?this.BoardDetail.replaceContent=this.BoardDetail.replaceContent.replaceAll(e,`<a href="${e}" target="_blank">${e}</a>`):this.BoardDetail.replaceContent=this.BoardDetail.replaceContent.replaceAll(e,`<a href="http://${e}" target="_blank">${e}</a>`)}))},replaceCommentURL(){let e=/(?:http(s?)?|www)\S+\w/g;Array.from(this.commentList).forEach(((t,n)=>{let i=t.contents.match(e),o=[...new Set(i)];this.commentList[n]["replaceContents"]=t.contents,Array.from(o).forEach((e=>{e.includes("http")?this.commentList[n]["replaceContents"]=this.commentList[n]["replaceContents"].replaceAll(e,`<a href="${e}" target="_blank">${e}</a>`):this.commentList[n]["replaceContents"]=this.commentList[n]["replaceContents"].replaceAll(e,`<a href="http://${e}" target="_blank">${e}</a>`)})),t.childCommentList.length>0&&Array.from(t.childCommentList).forEach(((t,i)=>{let o=t.contents.match(e),s=[...new Set(o)];this.commentList[n]["childCommentList"][i]["replaceContents"]=t.contents,Array.from(s).forEach((e=>{e.includes("http")?this.commentList[n]["childCommentList"][i]["replaceContents"]=this.commentList[n]["childCommentList"][i]["replaceContents"].replaceAll(e,`<a href="${e}" target="_blank">${e}</a>`):this.commentList[n]["childCommentList"][i]["replaceContents"]=this.commentList[n]["childCommentList"][i]["replaceContents"].replaceAll(e,`<a href="http://${e}" target="_blank">${e}</a>`)}))}))}))},scrollToBottom(){setTimeout((()=>{this.$refs.myContent.$el.scrollToBottom(100)}),100)},commentReBtn(e,t){switch(this.$refs.myContent.$el.scrollByPoint(0,200),e){case"re":this.reComment=this.reComment===t?null:t,this.reType="re",null===this.reComment&&this.getBoardDetail(!1,!0);break;case"update":this.$refs.myContent.$el.scrollByPoint(0,100),this.updateComment=this.updateComment===t?null:t,this.reType="update",this.reimgFileId=this.updateComment.attachFileId,this.reimgViewFileId=this.updateComment.cdnNm,null===this.updateComment&&(this.reimgFileId=null,this.showLoading(),this.getBoardDetail(!1,!0));break;case"reUpdate":this.$refs.myContent.$el.scrollByPoint(0,200),this.reUpdateComment=this.reUpdateComment===t?null:t,this.reType="reUpdate",this.reimgFileId=this.reUpdateComment.attachFileId,this.reimgViewFileId=this.reUpdateComment.cdnNm,null===this.reUpdateComment&&(this.reimgFileId=null,this.showLoading(),this.getBoardDetail(!1,!0));break}this.commentSelectItem=t},commentBtn(e,t){if(this.dynamicRow>=10)this.warningAlert("줄바꿈은 10줄까지만 가능합니다. 다시 확인해주세요.");else{{const e=(this.commentText.match(/\n/g)||[]).length+1;if(e>10)return void this.warningAlert("줄바꿈은 10줄까지만 가능합니다")}if("new"===e){if(!this.commentText&&!this.imgFileId)return void this.warningAlert("내용을 입력하거나 이미지를 선택해주세요.");this.showLoading(),(0,C.Yu)({url:"/setCommunityComment",param:{articleKey:C.bc.article,contents:this.commentText,mainFileId:this.imgFileId,commentType:"comment1",type:C.bc.type},then:e=>{"N"===e.successYn?this.warningAlert(e.message):(this.getBoardDetail(!0,!0),this.commentText="",this.newimgFileId=null,this.imgFileId="",this.dynamicRow=0),this.loading.dismiss()}}),this.newimgViewFileId=null}else if("child"===e){if(!this.childComment&&!this.imgFileId)return void this.warningAlert("내용을 입력하거나 이미지를 선택해주세요.");this.showLoading(),(0,C.Yu)({url:"/setCommunityComment",param:{articleKey:C.bc.article,contents:this.childComment,connectCommentKey:this.reComment.commentKey,mainFileId:this.reimgFileId,commentType:"comment2",type:C.bc.type},then:e=>{"N"===e.successYn?this.warningAlert(e.message):(this.getBoardDetail(!1,!0),this.childComment="",this.reComment=null,this.reimgFileId=null,this.imgFileId=""),this.loading.dismiss()}})}else if("update"===e){if(!this.updateComment.contents)return void this.warningAlert("내용을 입력해주세요.");this.showLoading(),(0,C.Yu)({url:"/setCommunityCommentUpdate",param:{articleKey:C.bc.article,contents:this.updateComment.contents,commentKey:this.updateComment.commentKey,mainFileId:this.reimgFileId,type:C.bc.type},then:e=>{"N"===e.successYn?this.warningAlert(e.message):(this.getBoardDetail(),this.warningAlert(e.message),this.reimgFileId=null,this.loading.dismiss(),this.updateComment=null,this.newimgFileId=null,this.imgFileId=""),this.loading.dismiss()}})}else if("reUpdate"===e){if(!this.reUpdateComment)return void this.warningAlert("내용을 입력해주세요.");this.showLoading(),(0,C.Yu)({url:"/setCommunityCommentUpdate",param:{articleKey:C.bc.article,contents:this.reUpdateComment.contents,commentKey:this.reUpdateComment.commentKey,mainFileId:this.reimgFileId,type:C.bc.type},then:e=>{"N"===e.successYn?this.warningAlert(e.message):(this.getBoardDetail(),this.warningAlert(e.message),this.reUpdateComment=null,this.reimgFileId=null,this.imgFileId=""),this.loading.dismiss()}})}}},cancel(){this.$refs.modal.$el.dismiss(null,"cancel")},confirm(){const e=this.$refs.input.$el.value;this.$refs.modal.$el.dismiss(e,"confirm")},async presentAlertConfirm(e,t){if(""!==this.reType)return void this.warningAlert("댓글 수정 중에는 삭제할수 없습니다.");const n=await this.alertController.create({header:"",message:"삭제하시겠습니까?",buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"삭제",handler:()=>{"comment"===e?(0,C.Yu)({url:"/setCommunityCommentDel",param:{articleKey:C.bc.article,commentKey:t.commentKey},then:e=>{"N"===e.successYn?this.presentAlert(e.message):(this.presentAlert(e.message),this.getBoardDetail())}}):"main"===e&&(0,C.Yu)({url:"/setCommunityDel",param:{articleKey:C.bc.article},then:e=>{"N"===e.successYn||this.$router.push("/community"),this.presentAlert(e.message)}})}}]});return n.present()},addPhoto(e){this.addPhotoType=e,_.V1.getPhoto({allowEditing:!1,source:_.oK.Photos,resultType:_.dk.Uri}).then((async e=>{let t=await fetch(e.webPath).then((e=>e.blob()));const n=new File([t],"fileName."+e.format,{lastModified:new Date,type:t.type});this.Attachfiles.push(n),this.$nextTick((()=>{this.insertFile()}))}))},onFileChange:function(e){const t=e.target.files||e.dataTransfer.files;if(!t.length)return;const n=["image/jpg","image/jpeg","image/png","image/gif"],i=t[0];n.includes(i.type)?(this.Attachfiles.push(t[0]),this.$nextTick((()=>{this.insertFile(e)}))):this.warningAlert("이미지 파일만 업로드 가능해요")},insertFile(){this.showLoading(),(0,C.oA)({url:"/setImage",param:{},file:this.Attachfiles,then:e=>{switch(this.Attachfiles=[],this.imgFileId=e.fileId,this.addPhotoType){case"newComment":this.newimgFileId=e.fileId,this.newimgViewFileId=e.cdnNm;break;case"reComment":this.reimgFileId=e.fileId,this.reimgViewFileId=e.cdnNm;break}this.loading.dismiss()}})},async presentAlert(e){const t=await this.alertController.create({header:"",message:e,buttons:[{text:"OK",role:"Okay",handler:()=>{}}]});return t.present()},async warningAlert(e){const t=await this.alertController.create({header:"",subHeader:"",message:e,buttons:["OK"]});return t.present()},async warningAlertNH(e){const t=await this.alertController.create({header:"",subHeader:"",message:e,buttons:[{text:"취소",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"이동",handler:()=>{this.$router.push("/store")}}]});return t.present()},async showLoading(){this.loading=await this.loadingController.create({message:"Loading...",duration:0}),await this.loading.present()},policeBtn(e,t){let n=this.BoardDetail.articleKey;"comment"===e?((0,C.IB)({targetKey:n,type:"comment",targetId:t.commentKey}),this.$router.push("/police")):"commentRe"===e&&((0,C.IB)({targetKey:n,type:"commentRe",targetId:t.commentKey}),this.$router.push("/police"))},openZoomedImage(e){if(this.isZoomed)this.isZoomed=!1;else{const t="https://"+e,n=document.createElement("div"),i=document.createElement("img");n.style.width="100%",n.style.height="100%",n.style.position="fixed",n.style.top="0",n.style.left="0",n.style.zIndex="1000",n.style.backgroundColor="rgba(0, 0, 0, 0.7)",n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",i.src=t,i.style.width="90%",i.style.height="auto",i.style.objectFit="contain",i.style.transformOrigin="center",i.style.pointerEvents="auto",n.appendChild(i),document.body.appendChild(n);const o=new(I())(i);let s=1,l=0,m=0,a=0,r=0;o.get("pinch").set({enable:!0}),o.get("pan").set({direction:I().DIRECTION_ALL}),o.on("pinchin pinchout",(e=>{"pinchin"===e.type?s-=.02:"pinchout"===e.type&&(s+=.02),s=Math.min(Math.max(s,.5),3),i.style.transform=`translate(${l}px, ${m}px) scale(${s})`})),o.on("panmove",(e=>{l=a+e.deltaX,m=r+e.deltaY,i.style.transform=`translate(${l}px, ${m}px) scale(${s})`})),o.on("panend",(()=>{a=l,r=m})),n.addEventListener("click",(()=>{document.body.removeChild(n)})),this.isZoomed=!0}},async warningConfirm(e,t){const n=await this.alertController.create({header:"",subHeader:"",message:e,buttons:[{text:"아니요",role:"cancel",cssClass:"secondary",handler:()=>{}},{text:"네",handler:()=>{t()}}]});return n.present()},ionInfinite(e){let t=this;setTimeout((function(){"second"==t.searchType?(0,C.Yu)({url:"/getContestReplyInfinite",param:{articleKey:C.bc.article,lastCommentKey:t.lastCommentKey},then:e=>{t.$nextTick((()=>{for(let n in e)t.commentList.push(e[n]);t.lastCommentKey=t.commentList[t.commentList.length-1].commentKey,t.isEndScroll=!0,t.replaceCommentURL()}))}}):t.isEndScroll=!0,e.target.complete()}),1e3)}}};var Y=n(83744);const V=(0,Y.Z)(E,[["render",p]]),R=V},53867:(e,t,n)=>{e.exports=n.p+"img/icon_vote.cd3f27d4.svg"}}]);
//# sourceMappingURL=1284.942dd048.js.map