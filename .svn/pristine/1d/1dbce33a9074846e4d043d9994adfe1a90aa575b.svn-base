"use strict";(self["webpackChunknavy"]=self["webpackChunknavy"]||[]).push([[6790],{60663:(e,t,n)=>{n.d(t,{Z:()=>c});var a=n(66252);function i(e,t,i,o,r,s){const l=(0,a.up)("ion-img"),d=(0,a.up)("swiper-slide"),p=(0,a.up)("swiper");return(0,a.wg)(),(0,a.j4)(p,{onSwiper:s.setSwiperRef,modules:r.modules,pagination:{clickable:!0},"slides-per-view":1,autoplay:{delay:3e3,disableOnInteraction:!1},loop:!0,observer:!0},{default:(0,a.w5)((()=>[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(i.bannerList,((e,i)=>((0,a.wg)(),(0,a.j4)(d,{key:i},{default:(0,a.w5)((()=>[(0,a.Wm)(l,{src:""!==e.cdnNm&&null!==e.cdnNm?"https://"+e.cdnNm:n(7189),onIonError:t[0]||(t[0]=e=>e.srcElement.src=n(7189)),onClick:t=>s.routerPush(e.path)},null,8,["src","onClick"])])),_:2},1024)))),128))])),_:1},8,["onSwiper","modules"])}n(57658);var o=n(99304),r=n(57552),s=n(28151);const l={name:"MainBanner",props:{bannerList:{type:Array}},components:{Swiper:r.tq,SwiperSlide:r.o5},data(){return{modules:[o.pt,o.tl,o.W_],swiperRef:null}},mounted(){},beforeMount(){},beforeUpdate(){},updated(){console.log(this.swiperRef),null!=this.swiperRef&&this.swiperRef.slideNext(2e3)},beforeUnmount(){},methods:{routerPush(e){""!=e&&null!=e&&("/subscription"==e?((0,s.EY)({subscribeYn:"Y"}),this.$router.push("/store")):this.$router.push(e))},setSwiperRef(e){this.swiperRef=e}}};var d=n(83744);const p=(0,d.Z)(l,[["render",i],["__scopeId","data-v-ada4e3f6"]]),c=p},30429:(e,t,n)=>{n.r(t),n.d(t,{default:()=>L});var a=n(66252),i=n(3577);const o={class:"row-box"};function r(e,t,n,r,s,l){const d=(0,a.up)("BackButton"),p=(0,a.up)("ion-buttons"),c=(0,a.up)("ion-title"),h=(0,a.up)("ion-toolbar"),m=(0,a.up)("ion-header"),u=(0,a.up)("MainBanner"),g=(0,a.up)("MessageTalkMaps"),w=(0,a.up)("MessageTalkMapUserInfo"),k=(0,a.up)("ion-text"),f=(0,a.up)("ion-button"),b=(0,a.up)("CustomModalLayout"),x=(0,a.up)("ion-content"),v=(0,a.up)("ion-modal"),L=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(L,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[(0,a.Wm)(h,{style:{"--background":"#1c1d48"}},{default:(0,a.w5)((()=>[(0,a.Wm)(p,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(d)])),_:1}),(0,a.Wm)(c,null,{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(s.title),1)])),_:1})])),_:1})])),_:1}),(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,null,{default:(0,a.w5)((()=>[s.bannerList.length>0?((0,a.wg)(),(0,a.j4)(u,{key:0,bannerList:s.bannerList},null,8,["bannerList"])):(0,a.kq)("",!0)])),_:1}),""!=s.chatroomId?((0,a.wg)(),(0,a.j4)(g,{key:0,chatroomId:s.chatroomId,onModalInfo:t[0]||(t[0]=e=>l.modalInfo(e))},null,8,["chatroomId"])):(0,a.kq)("",!0),(0,a.Wm)(v,{"is-open":s.mapInfoModal,"handle-behavior":"cycle",onIonModalDidDismiss:t[3]||(t[3]=e=>s.mapInfoModal=!1),"initial-breakpoint":.95,breakpoints:[0,.95],class:"custom-modal bottom-modal"},{default:(0,a.w5)((()=>[(0,a.Wm)(x,null,{default:(0,a.w5)((()=>[(0,a.Wm)(b,null,{header:(0,a.w5)((()=>[(0,a.Wm)(w,{item:s.profileItem,onClick:t[1]||(t[1]=e=>l.modalBtn("profile",s.modalItem))},null,8,["item"])])),content:(0,a.w5)((()=>[(0,a.Wm)(k,{color:"light",class:"text-lg text-bold",style:{"font-size":"20px"}},{default:(0,a.w5)((()=>[(0,a.Uk)((0,i.zw)(s.profileItem.shortWord),1)])),_:1})])),footer:(0,a.w5)((()=>[(0,a._)("div",o,[(0,a.Wm)(f,{onClick:t[2]||(t[2]=e=>l.modalBtn("profile",s.modalItem)),color:"primary",shape:"round",expand:"block",size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)(" 프로필 보기 ")])),_:1})])])),_:1})])),_:1})])),_:1},8,["is-open"])])),_:1})])),_:1})}n(57658);var s=n(27783),l=n(18903),d=n(28151);const p={id:"map",style:{width:"100%",height:"100%"}};function c(e,t,n,i,o,r){return(0,a.wg)(),(0,a.iD)("div",p)}var h=n(54652);const m={name:"MessageTalkMaps",props:{chatroomId:{type:Number}},components:{},data(){return{map:null,itemList:[],addrItem:{},currLat:"",currLon:"",markers:[],cluster:[],markerClustering:[],htmlMarker1:{content:"<div class='marker' style='display: flex; align-items: center; justify-content: center; background-color: #191A37; color: #fff; font-size: 20px; font-weight: 700; box-shadow: 6px 6px 10px rgba(color: #000000, alpha: 0.16);'></div>",size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)},htmlMarker2:{content:"<div class='marker' style='display: flex; align-items: center; justify-content: center; background-color: #191A37; color: #fff; font-size: 20px; font-weight: 700; box-shadow: 6px 6px 10px rgba(color: #000000, alpha: 0.16);'></div>",size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)},htmlMarker3:{content:"<div class='marker' style='display: flex; align-items: center; justify-content: center; background-color: #191A37; color: #fff; font-size: 20px; font-weight: 700; box-shadow: 6px 6px 10px rgba(color: #000000, alpha: 0.16);'></div>",size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)},htmlMarker4:{content:"<div class='marker' style='display: flex; align-items: center; justify-content: center; background-color: #191A37; color: #fff; font-size: 20px; font-weight: 700; box-shadow: 6px 6px 10px rgba(color: #000000, alpha: 0.16);'></div>",size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)},htmlMarker5:{content:"<div class='marker' style='display: flex; align-items: center; justify-content: center; background-color: #191A37; color: #fff; font-size: 20px; font-weight: 700; box-shadow: 6px 6px 10px rgba(color: #000000, alpha: 0.16);'></div>",size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)}}},mounted(){this.getLoginUser()},updated(){this.createMarker()},methods:{getLoginUser(){(0,d.Yu)({url:"/messageMain/getMessageUserAddr",param:{},then:e=>{this.addrItem=e[0],null!==this.addrItem.currLat||null!==this.addrItem.currLon?(this.currLat=this.addrItem.currLat,this.currLon=this.addrItem.currLon):(this.currLat=this.addrItem.lat,this.currLon=this.addrItem.lon),this.getMessageLatLon()}})},getMessageLatLon(){(0,d.Yu)({url:"/messageMain/getRoomUserLocation",param:{chatroomId:this.chatroomId},then:e=>{this.itemList=e,this.$nextTick((()=>{this.naverMap(this.currLat,this.currLon)}))}})},async naverMap(e,t){let n=this;const a=window.naver.maps;let i={center:new a.LatLng(e,t),zoom:15,zoomControl:!0,zoomControlOptions:{style:a.ZoomControlStyle.SMALL,position:a.Position.TOP_RIGHT}};this.map=new a.Map("map",i),a.Event.once(this.map,"init",(()=>{let n='<a style="\n                z-index: 100;\n                overflow: hidden;\n                display: inline-block;\n                position: absolute;\n                top: 7px;\n                left: 5px;\n                width: 34px;\n                height: 34px;\n                border: 1px solid rgba(58,70,88,.45);\n                border-radius: 2px;\n                background: #fcfcfd;\n                  background-clip: border-box;\n                text-align: center;\n                -webkit-background-clip: padding;\n                background-clip: padding-box;\n              "\n            >\n            <span style="\n                overflow: hidden;\n                display: inline-block;\n                color: transparent !important;\n                vertical-align: top;\n                background: url(https://ssl.pstatic.net/static/maps/m/spr_trff_v6.png) 0 0;\n                background-position-x: 0px;\n                background-position-y: 0px;\n                background-size: auto;\n                background-size: 200px 200px;\n                -webkit-background-size: 200px 200px;\n                width: 20px;\n                height: 20px;\n                margin: 7px 0 0 0;\n                background-position: -153px -31px;\n              ">중심위치</span>\n           </a>',i=new a.CustomControl(n,{position:window.naver.maps.Position.TOP_LEFT});i.setMap(this.map),window.naver.maps.Event.addDOMListener(i.getElement(),"click",(()=>{this.map.setCenter(new a.LatLng(e,t))}))})),a.Event.addListener(n.map,"zoom_changed",(function(){n.updateMarkers(n.markers)})),a.Event.addListener(n.map,"dragend",(function(){n.updateMarkers(n.markers)})),await this.createMarker()},createMarker(){const e=window.naver.maps;this.markers=[],this.itemList.forEach((t=>{const n=new e.LatLng(t.currLat,t.currLon),a=new e.Marker({position:n,map:this.map,icon:{content:`<div class="marker"><img src="https://${t.cdnThumbNm}" /></div>`,size:new e.Size(60,60),scaledSize:new e.Size(60,60),origin:new e.Point(0,0),anchor:new e.Point(12,37),draggable:!0},title:t.title});window.naver.maps.Event.addListener(a,"click",(()=>{this.$emit("modalInfo",t)})),this.markers.push(a)}));new h.P({minClusterSize:2,maxZoom:16,map:self.map,markers:self.markers,disableClickZoom:!1,gridSize:30,icons:[self.htmlMarker1,self.htmlMarker2,self.htmlMarker3,self.htmlMarker4,self.htmlMarker5],stylingFunction:function(e,t){const n=e.getElement().children[0];n.innerHTML=t}})},updateMarkers(){let e,t,n=this.map.getBounds();for(let a=0;a<this.markers.length;a++)e=this.markers[a],t=e.getPosition(),n.hasLatLng(t)?this.showMarker(e):this.hideMarker(e)},showMarker(e){e.setMap()||e.setMap(this.map)},hideMarker(e){e.setMap()&&e.setMap(null)}}};var u=n(83744);const g=(0,u.Z)(m,[["render",c],["__scopeId","data-v-3b191130"]]),w=g;var k=n(92662),f=n(37835),b=n(60663);const x={name:"MessageMap",components:{BackButton:f.Z,IonPage:s._i,IonHeader:s.Gu,IonToolbar:s.sr,IonIcon:s.gu,IonButtons:s.Sm,IonButton:s.YG,IonContent:s.W2,MessageTalkMaps:w,MessageTalkMapUserInfo:k.Z,MainBanner:b.Z},data(){return{locationOutline:l.Iv7,search:l.yC4,closeOutline:l.fID,chevronBack:l.Mny,itemList:[],map:null,addrItem:"",currLat:"",currLon:"",mapInfoModal:!1,modalItem:"",loading:null,mainFileId:"",regUserKey:"",userPhotoId:"",isEndScroll:!1,ssUserYn:"",attendYn:"",attendChk:"",inviteYn:"",attendRegTime:"",modalHeight:"500px",intervalId:null,selectedLat:null,selectedLng:null,cdnThumbNmProfile:"",htmlMarker1:null,htmlMarker2:null,htmlMarker3:null,htmlMarker4:null,htmlMarker5:null,chatroomId:null,profileItem:[],title:"",bannerList:[]}},ionViewWillEnter(){this.chatroomId=d.p7.chatroomId,this.title=d.p7.title,this.addrItem="",this.currLat="",this.currLon="",this.getBannerList(),"open"===d.$h.modal&&this.modalInfo(d.$h.item)},ionViewDidLeave(){},mounted(){},methods:{getBannerList(){(0,d.Yu)({url:"/getBannerList",param:{bannerType:"MESSAGE_MAP"},then:e=>{this.$nextTick((()=>{this.bannerList=e}))}})},getLoginUser(){(0,d.Yu)({url:"/messageMain/getMessageUserAddr",param:{},then:e=>{this.addrItem=e[0],null!==this.addrItem.currLat||null!==this.addrItem.currLon?(this.currLat=this.addrItem.currLat,this.currLon=this.addrItem.currLon):(this.currLat=this.addrItem.lat,this.currLon=this.addrItem.lon),this.getMessageLatLon()}})},getMessageLatLon(){(0,d.Yu)({url:"/messageMain/getRoomUserLocation",param:{chatroomId:d.p7.chatroomId},then:e=>{this.itemList=e,this.$nextTick((()=>{this.naverMap(this.currLat,this.currLon)}))}})},modalBtn(e,t){"profile"===e&&((0,d.PC)({userKey:t.regUserKey,type:"messageMap"}),this.$router.push("/dailyCardInfo"),this.mapInfoModal=!1)},joinIn(e){"Y"!==this.attendYn&&"Y"!==this.ssUserYn?(this.showLoading(),(0,d.Yu)({url:"/setOpenChatInvite",param:{openChatKey:e.openChatKey},then:e=>{this.inviteYn=e.inviteYn,this.loading.dismiss(),this.mapInfoModal=!1}})):this.$router.push({name:"MessageTalk",query:{chatroomId:this.chatroomId}})},modalInfo(e){this.modalItem=e,this.regUserKey=this.modalItem.regUserKey,this.mainFileId=this.modalItem.fileId,this.mapInfoModal=!0,this.$nextTick((()=>{this.getUserInfo()}))},getUserInfo(){(0,d.Yu)({url:"/getUserInfo",param:{regUserKey:this.regUserKey},then:e=>{this.profileItem=e}})},naverMap(e,t){const n=window.naver.maps;let a={center:new n.LatLng(e,t),zoom:15,zoomControl:!0,zoomControlOptions:{style:n.ZoomControlStyle.LARGE,position:n.Position.TOP_RIGHT}};this.map=new n.Map("map",a),n.Event.once(this.map,"init",(()=>{let a='<a style="\n                z-index: 100;\n                overflow: hidden;\n                display: inline-block;\n                position: absolute;\n                top: 7px;\n                left: 5px;\n                width: 34px;\n                height: 34px;\n                border: 1px solid rgba(58,70,88,.45);\n                border-radius: 2px;\n                background: #fcfcfd;\n                  background-clip: border-box;\n                text-align: center;\n                -webkit-background-clip: padding;\n                background-clip: padding-box;\n              "\n            >\n            <span style="\n                overflow: hidden;\n                display: inline-block;\n                color: transparent !important;\n                vertical-align: top;\n                background: url(https://ssl.pstatic.net/static/maps/m/spr_trff_v6.png) 0 0;\n                background-position-x: 0px;\n                background-position-y: 0px;\n                background-size: auto;\n                background-size: 200px 200px;\n                -webkit-background-size: 200px 200px;\n                width: 20px;\n                height: 20px;\n                margin: 7px 0 0 0;\n                background-position: -153px -31px;\n              ">중심위치</span>\n           </a>',i=new n.CustomControl(a,{position:window.naver.maps.Position.TOP_LEFT});i.setMap(this.map),window.naver.maps.Event.addDOMListener(i.getElement(),"click",(()=>{this.map.setCenter(new n.LatLng(e,t))}))})),this.itemList.forEach((e=>{const t=new n.LatLng(e.currLat,e.currLon),a=new n.Marker({position:t,map:this.map,icon:{content:`<div class="marker"><img src="https://${e.cdnThumbNm}" /></div>`,size:new n.Size(60,60),scaledSize:new n.Size(60,60),origin:new n.Point(0,0),anchor:new n.Point(12,37)},title:e.title});window.naver.maps.Event.addListener(a,"click",(()=>{this.modalInfo(e)}))}))},useGetClusterIcon(){null==this.htmlMarker1&&(this.htmlMarker1={content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:white;text-align:center;font-weight:bold;background:url(https://navermaps.github.io/maps.js.ncp/docs/img/cluster-marker-1.png);background-size:contain;"></div>',size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)}),null==this.htmlMarker2&&(this.htmlMarker2={content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:white;text-align:center;font-weight:bold;background:url(https://navermaps.github.io/maps.js.ncp/docs/img/cluster-marker-2.png);background-size:contain;"></div>',size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)}),null==this.htmlMarker3&&(this.htmlMarker3={content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:white;text-align:center;font-weight:bold;background:url(https://navermaps.github.io/maps.js.ncp/docs/img/cluster-marker-3.png);background-size:contain;"></div>',size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)}),null==this.htmlMarker4&&(this.htmlMarker4={content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:white;text-align:center;font-weight:bold;background:url(https://navermaps.github.io/maps.js.ncp/docs/img/cluster-marker-4.png);background-size:contain;"></div>',size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)}),null==this.htmlMarker5&&(this.htmlMarker5={content:'<div style="cursor:pointer;width:40px;height:40px;line-height:42px;font-size:10px;color:white;text-align:center;font-weight:bold;background:url(https://navermaps.github.io/maps.js.ncp/docs/img/cluster-marker-5.png);background-size:contain;"></div>',size:window.naver.maps.Size(40,40),anchor:window.naver.maps.Point(20,20)})},async showLoading(){this.loading=await s.G0.create({message:"Loading...",duration:0}),await this.loading.present()}}},v=(0,u.Z)(x,[["render",r],["__scopeId","data-v-93a649fa"]]),L=v}}]);
//# sourceMappingURL=6790-legacy.d28e7a3a.js.map