"use strict";(self["webpackChunknavy"]=self["webpackChunknavy"]||[]).push([[2291],{40411:(e,t,n)=>{n.d(t,{b:()=>s});var o=n(29895);const s=(0,o.fo)("Geolocation",{web:()=>n.e(6642).then(n.bind(n,56642)).then((e=>new e.GeolocationWeb))})},31405:(e,t,n)=>{n.d(t,{Z:()=>c});var o=n(66252);const s={class:"join-title"};function i(e,t,n,i,l,a){const d=(0,o.up)("ion-text");return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.Wm)(d,{color:"light"},{default:(0,o.w5)((()=>[(0,o._)("h2",null,[(0,o.WI)(e.$slots,"title",{},void 0,!0)])])),_:3}),(0,o.Wm)(d,{color:"light"},{default:(0,o.w5)((()=>[(0,o._)("p",null,[(0,o.WI)(e.$slots,"desc",{},void 0,!0)])])),_:3})])}var l=n(27783);const a={name:"JoinTitle",components:{IonText:l.yW}};var d=n(83744);const r=(0,d.Z)(a,[["render",i],["__scopeId","data-v-2fe7c318"]]),c=r},2982:(e,t,n)=>{n.d(t,{Z:()=>d});var o=n(66252);function s(e,t,n,s,i,l){const a=(0,o.up)("ion-spinner");return(0,o.wg)(),(0,o.j4)(a,{name:"lines"})}const i={name:"PageLoadingCheck"};var l=n(83744);const a=(0,l.Z)(i,[["render",s]]),d=a},15253:(e,t,n)=>{n.d(t,{Z:()=>r});var o=n(66252);function s(e,t,n,s,i,l){const a=(0,o.up)("ion-progress-bar");return(0,o.wg)(),(0,o.j4)(a,{value:l.calValue},null,8,["value"])}var i=n(27783);const l={name:"ProgressBar",props:{currIdx:{type:Number,default:0},totalIdx:{type:Number,default:10}},components:{IonProgressBar:i.X7},computed:{calValue(){return this.currIdx/this.totalIdx}}};var a=n(83744);const d=(0,a.Z)(l,[["render",s]]),r=d},22291:(e,t,n)=>{n.r(t),n.d(t,{default:()=>y});var o=n(66252),s=n(3577);const i={class:"layout-container"},l=(0,o._)("br",null,null,-1),a={class:"layout-container"},d={class:"btn-group"},r=(0,o._)("div",{id:"map",style:{width:"100%",height:"80%"}},null,-1),c={class:"layout-container"},u={class:"v-middle"},p={class:"btn-group"};function h(e,t,h,g,m,w){const v=(0,o.up)("BackButton"),f=(0,o.up)("ion-buttons"),k=(0,o.up)("ion-title"),_=(0,o.up)("ion-toolbar"),b=(0,o.up)("ProgressBar"),W=(0,o.up)("ion-header"),L=(0,o.up)("JoinTitle"),y=(0,o.up)("ion-input"),A=(0,o.up)("ion-img"),j=(0,o.up)("ion-button"),C=(0,o.up)("ion-item"),x=(0,o.up)("ion-list"),G=(0,o.up)("ion-content"),D=(0,o.up)("ion-ripple-effect"),M=(0,o.up)("ion-footer"),B=(0,o.up)("ion-icon"),O=(0,o.up)("PageLoadingCheck"),P=(0,o.up)("ion-text"),T=(0,o.up)("ion-row"),I=(0,o.up)("ion-grid"),V=(0,o.up)("ion-modal"),z=(0,o.up)("ion-page");return(0,o.wg)(),(0,o.j4)(z,null,{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(v)])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("지역설정")])),_:1})])),_:1}),(0,o.Wm)(b,{currIdx:null!=m.selectedAddressGu?8:7},null,8,["currIdx"])])),_:1}),(0,o.Wm)(G,null,{default:(0,o.w5)((()=>[(0,o._)("div",i,[(0,o.Wm)(L,null,{title:(0,o.w5)((()=>[(0,o.Uk)(" 내가 살고있는 지역을 "),l,(0,o.Uk)(" 설정해 주세요! ")])),desc:(0,o.w5)((()=>[(0,o.Uk)(" 가까운 거리의 상대를 추천해드려요!")])),_:1}),(0,o.Wm)(x,null,{default:(0,o.w5)((()=>[(0,o.Wm)(C,{lines:"none",class:"input-field has-icon-button"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,{onClick:t[0]||(t[0]=e=>w.openModal("address")),type:"text",placeholder:"구 까지만 표시되요!",modelValue:m.selectedAddressGu,"onUpdate:modelValue":t[1]||(t[1]=e=>m.selectedAddressGu=e),readonly:""},null,8,["modelValue"]),(0,o.Wm)(j,{fill:"clear",slot:"end",onClick:t[2]||(t[2]=e=>w.openModal("address"))},{default:(0,o.w5)((()=>[(0,o.Wm)(A,{src:n(12596)},null,8,["src"])])),_:1})])),_:1})])),_:1})])])),_:1}),(0,o.Wm)(M,{class:"join-footer"},{default:(0,o.w5)((()=>{var e;return[(0,o._)("div",a,[(0,o._)("div",d,[(0,o.Wm)(j,{color:"primary",size:"large",expand:"block",shape:"round",disabled:!(null!==(e=m.selectedAddressGu)&&void 0!==e&&e.length),onClick:w.validateAndNavigate},{default:(0,o.w5)((()=>[(0,o.Wm)(D),(0,o.Uk)(" 다음으로 ")])),_:1},8,["disabled","onClick"])])])]})),_:1}),(0,o.Wm)(V,{class:"location-modal","is-open":m.modalOpen,onIonModalDidDismiss:t[4]||(t[4]=e=>m.modalOpen=!1),onIonModalDidPresent:w.mapOpen,"initial-breakpoint":1,breakpoints:[0,1]},{default:(0,o.w5)((()=>[(0,o.Wm)(W,null,{default:(0,o.w5)((()=>[(0,o.Wm)(_,null,{default:(0,o.w5)((()=>[(0,o.Wm)(f,{slot:"start"},{default:(0,o.w5)((()=>[(0,o.Wm)(j,{onClick:t[3]||(t[3]=e=>w.closeModal())},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{slot:"icon-only",icon:m.chevronBack},null,8,["icon"])])),_:1})])),_:1}),(0,o.Wm)(k,null,{default:(0,o.w5)((()=>[(0,o.Uk)("지도에서 위치 확인")])),_:1})])),_:1})])),_:1}),(0,o.Wm)(G,{fullscreen:!0},{default:(0,o.w5)((()=>[!1!==m.lodingCheck?((0,o.wg)(),(0,o.j4)(O,{key:0,style:{display:"flex","align-items":"center","justify-content":"center",margin:"0 auto",height:"80%"}})):(0,o.kq)("",!0),r])),_:1}),(0,o.Wm)(M,{class:"location-modal-footer",style:{height:"110px","background-color":"#191a39",padding:"5px"}},{default:(0,o.w5)((()=>[(0,o._)("div",c,[(0,o.Wm)(I,null,{default:(0,o.w5)((()=>[(0,o.Wm)(T,{class:"ion-align-items-end ion-justify-content-between",style:{padding:"0 15px 0 15px"}},{default:(0,o.w5)((()=>[(0,o.Wm)(P,{color:"light"},{default:(0,o.w5)((()=>[(0,o.Uk)((0,s.zw)(m.locationView),1)])),_:1}),(0,o.Wm)(P,{color:"light",onClick:w.jibunGuCheck},{default:(0,o.w5)((()=>[(0,o.Wm)(B,{icon:m.swapHorizontalOutline,class:"v-middle"},null,8,["icon"]),(0,o._)("span",u,(0,s.zw)(m.checkBtnText),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),(0,o._)("div",p,[(0,o.Wm)(j,{color:"primary",size:"large",expand:"block",shape:"round",onClick:w.saveLocationBtn},{default:(0,o.w5)((()=>[(0,o.Wm)(D),(0,o.Uk)(" 이 위치로 주소 설정 ")])),_:1},8,["onClick"])])])])),_:1})])),_:1},8,["is-open","onIonModalDidPresent"])])),_:1})}n(57658);var g=n(27783),m=n(18903),w=(n(28151),n(31405)),v=n(15253),f=n(2982),k=n(40411),_=n(29895);const b={name:"JoinLocation",inject:["alertController"],components:{JoinTitle:w.Z,ProgressBar:v.Z,PageLoadingCheck:f.Z},data(){return{chevronBack:m.Mny,swapHorizontalOutline:m._hl,location:"",inputType:"",message:"",showModal:!1,modalOpen:!1,visible:!1,locationView:"",selectedLat:null,selectedLng:null,selectedjibunAddress:null,selectedroadAddress:null,selectedAddressGu:null,selectedjibunAddressDong:null,selectedroadAddressDong:null,checkBtn:"dong",checkBtnText:"구까지 표시",lodingCheck:!1,checkLatlng:"",gpsLat:"",gpsLon:""}},ionViewWillEnter(){this.selectedjibunAddressDong=null,this.selectedAddressGu=null},ionViewDidLeave(){},mounted(){},methods:{goRouter(){this.$store.state.joinMap["addr1"]=this.selectedjibunAddressDong,this.$store.state.joinMap["shotaddr1"]=this.selectedAddressGu,this.$store.state.joinMap["addr2"]="",this.$store.state.joinMap["shotaddr2"]="",this.$store.state.joinMap["lat"]=this.selectedLat,this.$store.state.joinMap["lon"]=this.selectedLng,this.$router.push("/joinProfile")},async getGps(){"web"!==_.dV.getPlatform()?await k.b.getCurrentPosition().then((e=>{this.gpsLat=e.coords.latitude,this.gpsLon=e.coords.longitude})):(console.log("[개발환경] web 에서 GPS는 활성화 되지 않습니다."),clearInterval(this.intervalLatLon))},openModal(e){this.getGps(),this.inputType=e,this.lodingCheck=!0,this.modalOpen=!0},mapOpen(){let e,t;this.lodingCheck=!1,this.$nextTick((()=>{""===this.gpsLat||""===this.gpsLon?(e=37.5751959,t=126.9764627):(e=this.gpsLat,t=this.gpsLon),this.naverMap(e,t)}))},closeModal(){this.modalOpen=!1},selectAddress(e){"address"===this.inputType?(this.addr1=e.address,this.shotaddr1=e.newAddress,this.address=this.addr1):"location"===this.inputType&&(this.addr2=e.location,this.shotaddr2=e.newLocation,this.location=this.shotaddr2),this.modalOpen=!1},validateAndNavigate(){Object.keys(this.locationView).length>0?this.goRouter():this.warningAlert("주소를 입력하지 않았습니다.")},async warningAlert(e){const t=await this.alertController.create({header:"",subHeader:"",message:e,buttons:["OK"]});return t.present()},saveLocationBtn(){this.location=this.locationView,this.modalOpen=!1},jibunGuCheck(){"dong"===this.checkBtn?(null!==this.selectedAddressGu&&(this.locationView=this.selectedAddressGu),this.checkBtnText="동까지 표시",this.checkBtn="gu"):(null!==this.selectedjibunAddressDong&&(this.locationView=this.selectedjibunAddressDong),this.checkBtnText="구까지 표시",this.checkBtn="dong")},async showLoading(e){this.loading=await g.G0.create({message:"Loading...",duration:e}),await this.loading.present()},naverMap(e,t){const n=window.naver.maps;let o={center:new n.LatLng(e,t),zoom:17,zoomControl:!0,zoomControlOptions:{style:n.ZoomControlStyle.LARGE,position:n.Position.TOP_RIGHT}};this.map=new n.Map("map",o);const s=new n.Marker({position:this.map.getCenter(),map:this.map,icon:{url:"https://navermaps.github.io/maps.js.ncp/docs/img/example/pin_default.png",size:new n.Size(24,37),scaledSize:new n.Size(24,37),origin:new n.Point(0,0),anchor:new n.Point(12,37)}});this.selectedLat=e,this.selectedLng=t;let i=new n.LatLng(e,t);this.reverseGeocodes(i),n.Event.addListener(this.map,"drag",(()=>{s.setPosition(this.map.getCenter())})),n.Event.addListener(this.map,"dragend",(e=>{this.selectedLat=e.coord.y,this.selectedLng=e.coord.x;let t=new window.naver.maps.LatLng(e.coord.y,e.coord.x);this.reverseGeocodes(t)}))},reverseGeocodes(e){let t=this;const n=window.naver.maps;n.Service.reverseGeocode({coords:e,orders:[n.Service.OrderType.ADDR,n.Service.OrderType.ROAD_ADDR].join(",")},(function(e,o){if(e===n.Service.Status.ERROR)return alert("Something Wrong!");let s=o.v2.results.length>1?1:0;t.selectedAddressGu=o.v2.results[s].region.area1.name+" "+o.v2.results[s].region.area2.name,t.selectedjibunAddressDong=o.v2.results[s].region.area1.name+" "+o.v2.results[s].region.area2.name+" "+o.v2.results[s].region.area3.name,t.selectedroadAddressDong=o.v2.results[s].region.area1.name+" "+o.v2.results[s].region.area2.name+" "+o.v2.results[s].land.name,"dong"===t.checkBtn?t.locationView=t.selectedjibunAddressDong:t.locationView=t.selectedAddressGu}))}}};var W=n(83744);const L=(0,W.Z)(b,[["render",h]]),y=L},12596:(e,t,n)=>{e.exports=n.p+"img/icon_location.8c5560ed.svg"}}]);
//# sourceMappingURL=2291.bd7309de.js.map